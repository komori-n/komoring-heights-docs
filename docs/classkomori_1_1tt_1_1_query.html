<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KomoringHeights: komori::tt::Query Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KomoringHeights
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacekomori.html">komori</a></li><li class="navelem"><a class="el" href="namespacekomori_1_1tt.html">tt</a></li><li class="navelem"><a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkomori_1_1tt_1_1_query-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">komori::tt::Query Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>連続する複数エントリを束ねてまとめて読み書きするためのクラス。  
 <a href="classkomori_1_1tt_1_1_query.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for komori::tt::Query:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query__coll__graph.png" border="0" usemap="#akomori_1_1tt_1_1_query_coll__map" alt="Collaboration graph"/></div>
<map name="akomori_1_1tt_1_1_query_coll__map" id="akomori_1_1tt_1_1_query_coll__map">
<area shape="rect" title="連続する複数エントリを束ねてまとめて読み書きするためのクラス。" alt="" coords="2328,180,2460,207"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html" title="局面の探索結果を保続するための基本クラス。" alt="" coords="1695,145,1821,172"/>
<area shape="rect" href="classkomori_1_1tt_1_1_circular_entry_pointer.html" title="[begin_ptr, end_ptr) の循環配列を指すポインタを管理するクラス。" alt="" coords="1951,173,2129,214"/>
<area shape="rect" href="classkomori_1_1detail_1_1_mate_len_impl.html" title=" " alt="" coords="1335,138,1541,179"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title=" " alt="" coords="681,73,874,129"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title="operator== から operator!= を自動定義するクラス。" alt="" coords="6,50,199,91"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title=" " alt="" coords="416,138,627,179"/>
<area shape="rect" href="classkomori_1_1_bit_set.html" title=" " alt="" coords="1363,21,1513,62"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title=" " alt="" coords="425,21,618,62"/>
<area shape="rect" href="structkomori_1_1_define_comparison_operators_by_less.html" title=" " alt="" coords="661,261,893,317"/>
<area shape="rect" href="structkomori_1_1_define_comparison_operators_by_less.html" title="operator&lt; から各種演算子を自動定義するクラス。" alt="" coords="5,243,200,285"/>
<area shape="rect" href="structkomori_1_1_define_comparison_operators_by_less.html" title=" " alt="" coords="405,204,637,260"/>
<area shape="rect" href="classkomori_1_1detail_1_1_mate_len_impl.html" title="MateLen と MateLen16 の実装本体。中身はほぼ同じなので一箇所にまとめる。" alt="" coords="921,145,1164,172"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html" title=" " alt="" coords="1332,221,1544,262"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html" title="std::atomic を用いた Shared&#45;Exclusive lock" alt="" coords="917,247,1168,273"/>
<area shape="rect" href="classkomori_1_1_bit_set.html" title="整数 T を用いたフラグ集合。" alt="" coords="967,28,1119,55"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html" title="千日手手順（経路ハッシュ値）を記録する置換表" alt="" coords="1943,239,2137,265"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8c8bf9913c5a039c98bbdf30aba29eda"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a8c8bf9913c5a039c98bbdf30aba29eda">Query</a> (<a class="el" href="classkomori_1_1tt_1_1_repetition_table.html">RepetitionTable</a> &amp;rep_table, <a class="el" href="classkomori_1_1tt_1_1_circular_entry_pointer.html">CircularEntryPointer</a> initial_entry_pointer, Key path_key, Key board_key, Hand hand, Depth depth)</td></tr>
<tr class="memdesc:a8c8bf9913c5a039c98bbdf30aba29eda"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkomori_1_1tt_1_1_query.html" title="連続する複数エントリを束ねてまとめて読み書きするためのクラス。">Query</a> の構築を行う。  <a href="classkomori_1_1tt_1_1_query.html#a8c8bf9913c5a039c98bbdf30aba29eda">More...</a><br /></td></tr>
<tr class="separator:a8c8bf9913c5a039c98bbdf30aba29eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad348d5d5cf1972c770cdf6ef46dfc00c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#ad348d5d5cf1972c770cdf6ef46dfc00c">Query</a> ()=default</td></tr>
<tr class="memdesc:ad348d5d5cf1972c770cdf6ef46dfc00c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor(default)  <a href="classkomori_1_1tt_1_1_query.html#ad348d5d5cf1972c770cdf6ef46dfc00c">More...</a><br /></td></tr>
<tr class="separator:ad348d5d5cf1972c770cdf6ef46dfc00c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9843dd0fd42d6c19509aadcd679b76b2"><td class="memItemLeft" align="right" valign="top"><a id="a9843dd0fd42d6c19509aadcd679b76b2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a9843dd0fd42d6c19509aadcd679b76b2">Query</a> (const <a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a> &amp;)=delete</td></tr>
<tr class="memdesc:a9843dd0fd42d6c19509aadcd679b76b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor(delete). 使うことはないと思われるので封じておく。 <br /></td></tr>
<tr class="separator:a9843dd0fd42d6c19509aadcd679b76b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3917cc7b4d11bc91deda7dbd6df5aad7"><td class="memItemLeft" align="right" valign="top"><a id="a3917cc7b4d11bc91deda7dbd6df5aad7"></a>
constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a3917cc7b4d11bc91deda7dbd6df5aad7">Query</a> (<a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a> &amp;&amp;) noexcept=delete</td></tr>
<tr class="memdesc:a3917cc7b4d11bc91deda7dbd6df5aad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor(default) <br /></td></tr>
<tr class="separator:a3917cc7b4d11bc91deda7dbd6df5aad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38adc89232174eee862569a2b7739d93"><td class="memItemLeft" align="right" valign="top"><a id="a38adc89232174eee862569a2b7739d93"></a>
<a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a38adc89232174eee862569a2b7739d93">operator=</a> (const <a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a> &amp;)=delete</td></tr>
<tr class="memdesc:a38adc89232174eee862569a2b7739d93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy assign operator(delete) <br /></td></tr>
<tr class="separator:a38adc89232174eee862569a2b7739d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a549f1cb1e5750a1a9ef962571c0cd2f3"><td class="memItemLeft" align="right" valign="top"><a id="a549f1cb1e5750a1a9ef962571c0cd2f3"></a>
constexpr <a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a549f1cb1e5750a1a9ef962571c0cd2f3">operator=</a> (<a class="el" href="classkomori_1_1tt_1_1_query.html">Query</a> &amp;&amp;) noexcept=default</td></tr>
<tr class="memdesc:a549f1cb1e5750a1a9ef962571c0cd2f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assign operator(default) <br /></td></tr>
<tr class="separator:a549f1cb1e5750a1a9ef962571c0cd2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52ad0686572c8efba1b65f3b2db58791"><td class="memItemLeft" align="right" valign="top"><a id="a52ad0686572c8efba1b65f3b2db58791"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a52ad0686572c8efba1b65f3b2db58791">~Query</a> () noexcept=default</td></tr>
<tr class="memdesc:a52ad0686572c8efba1b65f3b2db58791"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a52ad0686572c8efba1b65f3b2db58791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36721e209bb8f7cdc9a97e701a37049b"><td class="memItemLeft" align="right" valign="top"><a id="a36721e209bb8f7cdc9a97e701a37049b"></a>
constexpr <a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a36721e209bb8f7cdc9a97e701a37049b">GetBoardKeyHandPair</a> () const noexcept</td></tr>
<tr class="memdesc:a36721e209bb8f7cdc9a97e701a37049b"><td class="mdescLeft">&#160;</td><td class="mdescRight">盤面ハッシュ値と持ち駒のペアを返す <br /></td></tr>
<tr class="separator:a36721e209bb8f7cdc9a97e701a37049b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862bd3224491b431eaff33bc08755ce2"><td class="memTemplParams" colspan="2">template&lt;typename InitialEvalFunc &gt; </td></tr>
<tr class="memitem:a862bd3224491b431eaff33bc08755ce2"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a862bd3224491b431eaff33bc08755ce2">LookUp</a> (bool &amp;does_have_old_child, <a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a> len, InitialEvalFunc &amp;&amp;eval_func) const</td></tr>
<tr class="memdesc:a862bd3224491b431eaff33bc08755ce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">置換表から結果を集めてきて返す関数。  <a href="classkomori_1_1tt_1_1_query.html#a862bd3224491b431eaff33bc08755ce2">More...</a><br /></td></tr>
<tr class="separator:a862bd3224491b431eaff33bc08755ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11cf79d33310475e709b3001a39ee63"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#ae11cf79d33310475e709b3001a39ee63">LookUpParent</a> (<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> &amp;pn, <a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> &amp;dn) const noexcept</td></tr>
<tr class="memdesc:ae11cf79d33310475e709b3001a39ee63"><td class="mdescLeft">&#160;</td><td class="mdescRight">置換表に保存された現局面の親局面を取得する  <a href="classkomori_1_1tt_1_1_query.html#ae11cf79d33310475e709b3001a39ee63">More...</a><br /></td></tr>
<tr class="separator:ae11cf79d33310475e709b3001a39ee63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae471899eb3502d6ee206dd0dbf88a0fa"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a>, <a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#ae471899eb3502d6ee206dd0dbf88a0fa">FinalRange</a> () const noexcept</td></tr>
<tr class="memdesc:ae471899eb3502d6ee206dd0dbf88a0fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">詰み／不詰手数専用の <a class="el" href="classkomori_1_1tt_1_1_query.html#a862bd3224491b431eaff33bc08755ce2" title="置換表から結果を集めてきて返す関数。">LookUp()</a>  <a href="classkomori_1_1tt_1_1_query.html#ae471899eb3502d6ee206dd0dbf88a0fa">More...</a><br /></td></tr>
<tr class="separator:ae471899eb3502d6ee206dd0dbf88a0fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add5f4c6c79b8cf305918bd62683a0078"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#add5f4c6c79b8cf305918bd62683a0078">SetResult</a> (const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;result, <a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a> parent_key_hand_pair=<a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>{<a class="el" href="namespacekomori.html#a69ee19c9520e168d882df693b6566a9b">kNullKey</a>, <a class="el" href="namespacekomori.html#a210e0bb519f465c1516790e741bda731">kNullHand</a>}) const noexcept</td></tr>
<tr class="memdesc:add5f4c6c79b8cf305918bd62683a0078"><td class="mdescLeft">&#160;</td><td class="mdescRight">探索結果 <code>result</code> を置換表に書き込む  <a href="classkomori_1_1tt_1_1_query.html#add5f4c6c79b8cf305918bd62683a0078">More...</a><br /></td></tr>
<tr class="separator:add5f4c6c79b8cf305918bd62683a0078"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a75c0a082696f3cd379037b8b0556ca98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkomori_1_1tt_1_1_entry.html">Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a75c0a082696f3cd379037b8b0556ca98">FindOrCreate</a> (Hand hand) const noexcept</td></tr>
<tr class="memdesc:a75c0a082696f3cd379037b8b0556ca98"><td class="mdescLeft">&#160;</td><td class="mdescRight">置換表に <code>hand</code> に一致するエントリがあればそれを返し、なければ作って返す  <a href="classkomori_1_1tt_1_1_query.html#a75c0a082696f3cd379037b8b0556ca98">More...</a><br /></td></tr>
<tr class="separator:a75c0a082696f3cd379037b8b0556ca98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bfc235e68c2c32fcfab1dd88ac25c0c"><td class="memTemplParams" colspan="2">template&lt;bool kIsProven&gt; </td></tr>
<tr class="memitem:a5bfc235e68c2c32fcfab1dd88ac25c0c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a5bfc235e68c2c32fcfab1dd88ac25c0c">SetFinal</a> (const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;result) const noexcept</td></tr>
<tr class="memdesc:a5bfc235e68c2c32fcfab1dd88ac25c0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">詰みまたは不詰の探索結果 <code>result</code> を置換表に書き込む  <a href="classkomori_1_1tt_1_1_query.html#a5bfc235e68c2c32fcfab1dd88ac25c0c">More...</a><br /></td></tr>
<tr class="separator:a5bfc235e68c2c32fcfab1dd88ac25c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbef48a41d416069c997ec6315a938de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#adbef48a41d416069c997ec6315a938de">SetRepetition</a> (const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;result) const noexcept</td></tr>
<tr class="separator:adbef48a41d416069c997ec6315a938de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64af13f9edde082ec5e11ca79c904ee3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a64af13f9edde082ec5e11ca79c904ee3">SetUnknown</a> (const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;result, <a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a> parent_key_hand_pair) const noexcept</td></tr>
<tr class="memdesc:a64af13f9edde082ec5e11ca79c904ee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">探索中の探索結果 <code>result</code> を置換表に書き込む関数  <a href="classkomori_1_1tt_1_1_query.html#a64af13f9edde082ec5e11ca79c904ee3">More...</a><br /></td></tr>
<tr class="separator:a64af13f9edde082ec5e11ca79c904ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac2ce313cd7ca354e660f381d6f447e39"><td class="memItemLeft" align="right" valign="top"><a id="ac2ce313cd7ca354e660f381d6f447e39"></a>
<a class="el" href="classkomori_1_1tt_1_1_repetition_table.html">RepetitionTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#ac2ce313cd7ca354e660f381d6f447e39">rep_table_</a></td></tr>
<tr class="memdesc:ac2ce313cd7ca354e660f381d6f447e39"><td class="mdescLeft">&#160;</td><td class="mdescRight">千日手テーブル。千日手判定に用いる。 <br /></td></tr>
<tr class="separator:ac2ce313cd7ca354e660f381d6f447e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9da467ec856e68ec9f9a39f61729f392"><td class="memItemLeft" align="right" valign="top"><a id="a9da467ec856e68ec9f9a39f61729f392"></a>
<a class="el" href="classkomori_1_1tt_1_1_circular_entry_pointer.html">CircularEntryPointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a9da467ec856e68ec9f9a39f61729f392">initial_entry_pointer_</a></td></tr>
<tr class="memdesc:a9da467ec856e68ec9f9a39f61729f392"><td class="mdescLeft">&#160;</td><td class="mdescRight">通常テーブルの探索開始位置への循環ポインタ <br /></td></tr>
<tr class="separator:a9da467ec856e68ec9f9a39f61729f392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c44ca6e278afb54923188455c3294c"><td class="memItemLeft" align="right" valign="top"><a id="a09c44ca6e278afb54923188455c3294c"></a>
Key&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a09c44ca6e278afb54923188455c3294c">path_key_</a></td></tr>
<tr class="memdesc:a09c44ca6e278afb54923188455c3294c"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の経路ハッシュ値 <br /></td></tr>
<tr class="separator:a09c44ca6e278afb54923188455c3294c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb454650c46e5789c2d67498d2b6480"><td class="memItemLeft" align="right" valign="top"><a id="aafb454650c46e5789c2d67498d2b6480"></a>
Key&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#aafb454650c46e5789c2d67498d2b6480">board_key_</a></td></tr>
<tr class="memdesc:aafb454650c46e5789c2d67498d2b6480"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の盤面ハッシュ値 <br /></td></tr>
<tr class="separator:aafb454650c46e5789c2d67498d2b6480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7b84b223dc2ac750d455f31110d34f"><td class="memItemLeft" align="right" valign="top"><a id="a0f7b84b223dc2ac750d455f31110d34f"></a>
Hand&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a0f7b84b223dc2ac750d455f31110d34f">hand_</a></td></tr>
<tr class="memdesc:a0f7b84b223dc2ac750d455f31110d34f"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の持ち駒 <br /></td></tr>
<tr class="separator:a0f7b84b223dc2ac750d455f31110d34f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0afe07f646dcc3bd7c5ca6f19e8dd52"><td class="memItemLeft" align="right" valign="top"><a id="ae0afe07f646dcc3bd7c5ca6f19e8dd52"></a>
Depth&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#ae0afe07f646dcc3bd7c5ca6f19e8dd52">depth_</a></td></tr>
<tr class="memdesc:ae0afe07f646dcc3bd7c5ca6f19e8dd52"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の探索深さ <br /></td></tr>
<tr class="separator:ae0afe07f646dcc3bd7c5ca6f19e8dd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ebc4f601c6d9d3d8bb1cc2cd164ae23"><td class="memItemLeft" align="right" valign="top"><a id="a7ebc4f601c6d9d3d8bb1cc2cd164ae23"></a>
<a class="el" href="classkomori_1_1tt_1_1_entry.html">Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1tt_1_1_query.html#a7ebc4f601c6d9d3d8bb1cc2cd164ae23">cached_entry_</a></td></tr>
<tr class="memdesc:a7ebc4f601c6d9d3d8bb1cc2cd164ae23"><td class="mdescLeft">&#160;</td><td class="mdescRight">前回アクセスしたエントリ <br /></td></tr>
<tr class="separator:a7ebc4f601c6d9d3d8bb1cc2cd164ae23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>連続する複数エントリを束ねてまとめて読み書きするためのクラス。 </p>
<p>詰将棋エンジンでは置換表を何回も何回も読み書きする。このクラスでは、置換表の読み書きに必要となる 情報（ハッシュ値など）をキャッシュしておき、高速化することが目的である。</p>
<h2><a class="anchor" id="autotoc_md18"></a>
実装詳細</h2>
<p>置換表から結果を読む際、以下の情報を利用して探索結果を復元する。</p>
<ol type="1">
<li>同一局面（盤面も持ち駒も一致）</li>
<li>優等局面（盤面が一致していて持ち駒が現局面より多い）</li>
<li>劣等局面（盤面が一致していて持ち駒が現局面より少ない） </li>
</ol>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00055">55</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8c8bf9913c5a039c98bbdf30aba29eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c8bf9913c5a039c98bbdf30aba29eda">&#9670;&nbsp;</a></span>Query() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr komori::tt::Query::Query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkomori_1_1tt_1_1_repetition_table.html">RepetitionTable</a> &amp;&#160;</td>
          <td class="paramname"><em>rep_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkomori_1_1tt_1_1_circular_entry_pointer.html">CircularEntryPointer</a>&#160;</td>
          <td class="paramname"><em>initial_entry_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key&#160;</td>
          <td class="paramname"><em>path_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key&#160;</td>
          <td class="paramname"><em>board_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Hand&#160;</td>
          <td class="paramname"><em>hand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Depth&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classkomori_1_1tt_1_1_query.html" title="連続する複数エントリを束ねてまとめて読み書きするためのクラス。">Query</a> の構築を行う。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rep_table</td><td>千日手テーブル </td></tr>
    <tr><td class="paramname">initial_entry_pointer</td><td>通常テーブルの探索開始位置への循環ポインタ </td></tr>
    <tr><td class="paramname">path_key</td><td>経路ハッシュ値 </td></tr>
    <tr><td class="paramname">board_key</td><td>盤面ハッシュ値 </td></tr>
    <tr><td class="paramname">hand</td><td>持ち駒 </td></tr>
    <tr><td class="paramname">depth</td><td>探索深さ </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00066">66</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>

</div>
</div>
<a id="ad348d5d5cf1972c770cdf6ef46dfc00c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad348d5d5cf1972c770cdf6ef46dfc00c">&#9670;&nbsp;</a></span>Query() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">komori::tt::Query::Query </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default constructor(default) </p>
<p>配列で領域を確保したいためデフォルトコンストラクト可能にしておく。デフォルトコンストラクト状態では メンバ関数の呼び出しは完全に禁止である。そのため、使用する前に必ず引数つきのコンストラクタで初期化を行うこと。 </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae471899eb3502d6ee206dd0dbf88a0fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae471899eb3502d6ee206dd0dbf88a0fa">&#9670;&nbsp;</a></span>FinalRange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;<a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a>, <a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a>&gt; komori::tt::Query::FinalRange </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>詰み／不詰手数専用の <a class="el" href="classkomori_1_1tt_1_1_query.html#a862bd3224491b431eaff33bc08755ce2" title="置換表から結果を集めてきて返す関数。">LookUp()</a> </p>
<dl class="section return"><dt>Returns</dt><dd>pair&lt;最長不詰手数、最短詰み手数&gt;</dd></dl>
<p>現局面の最長不詰手数および最短詰み手数を得る関数。LookUp() を単純に使うと、詰み手数と不詰手数を同時に得るのは 難しいため、専用関数として提供する。詰み探索終了後の手順の復元に用いることを想定している。 </p>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00207">207</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_ae471899eb3502d6ee206dd0dbf88a0fa_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_ae471899eb3502d6ee206dd0dbf88a0fa_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_ae471899eb3502d6ee206dd0dbf88a0fa_cgraph" id="aclasskomori_1_1tt_1_1_query_ae471899eb3502d6ee206dd0dbf88a0fa_cgraph">
<area shape="rect" title="詰み／不詰手数専用の LookUp()" alt="" coords="5,71,144,112"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#a162edc52658cdbc3c541976858326b73" title="経路ハッシュ値 path_key が保存されているかどうか判定する。" alt="" coords="192,37,387,79"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="222,103,357,144"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ac3aba5ed8a8a18bb8591d38cb0a050ba" title="index の次のインデックスを求める。" alt="" coords="435,5,629,47"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ab4064a942f6e30221c09712db99d1d28" title="path_key に対する探索開始インデックスを求める。" alt="" coords="435,71,629,112"/>
</map>
</div>

</div>
</div>
<a id="a75c0a082696f3cd379037b8b0556ca98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c0a082696f3cd379037b8b0556ca98">&#9670;&nbsp;</a></span>FindOrCreate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkomori_1_1tt_1_1_entry.html">Entry</a>* komori::tt::Query::FindOrCreate </td>
          <td>(</td>
          <td class="paramtype">Hand&#160;</td>
          <td class="paramname"><em>hand</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>置換表に <code>hand</code> に一致するエントリがあればそれを返し、なければ作って返す </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hand</td><td>持ち駒 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>見つけた or 作成したエントリ。<code>lock()</code> された状態で返るので、参照が完了したら必ず <code>unlock()</code> を呼ぶこと。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00255">255</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_a75c0a082696f3cd379037b8b0556ca98_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_a75c0a082696f3cd379037b8b0556ca98_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_a75c0a082696f3cd379037b8b0556ca98_cgraph" id="aclasskomori_1_1tt_1_1_query_a75c0a082696f3cd379037b8b0556ca98_cgraph">
<area shape="rect" title="置換表に hand に一致するエントリがあればそれを返し、なければ作って返す" alt="" coords="5,100,144,141"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#ac259de04e6dad6e3c3223570d8337d26" title="保存されている情報が board_key のものかどうか判定する" alt="" coords="205,5,340,47"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="205,71,340,112"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a24bacfcc1ebd8e79cd3e29340e0f1d78" title="エントリの排他ロックを取る" alt="" coords="192,137,353,163"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a2b1919fecc95bae6896ed1ce8cd40ab1" title="エントリの排他ロックを解除する" alt="" coords="205,189,340,231"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a29f2f8973d3016bbc68ba9c69d07d0e7" title="排他ロックを取得する" alt="" coords="401,127,613,168"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a678bfb5327fe28da25a448d1a5f687ae" title="排他ロックを解放する" alt="" coords="401,192,613,233"/>
</map>
</div>

</div>
</div>
<a id="a862bd3224491b431eaff33bc08755ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862bd3224491b431eaff33bc08755ce2">&#9670;&nbsp;</a></span>LookUp()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename InitialEvalFunc &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> komori::tt::Query::LookUp </td>
          <td>(</td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>does_have_old_child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InitialEvalFunc &amp;&amp;&#160;</td>
          <td class="paramname"><em>eval_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>置換表から結果を集めてきて返す関数。 </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">InitialEvalFunc</td><td>初期値関数の型 </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">does_have_old_child</td><td>unproven old child の結果を使った場合 <code>true</code> が書かれる変数 </td></tr>
    <tr><td class="paramname">len</td><td>探している詰み手数 </td></tr>
    <tr><td class="paramname">eval_func</td><td>初期値を計算する関数。エントリが見つからなかったときのみ呼ばれる。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Look Up 結果</dd></dl>
<p>置換表を探索して現局面の探索情報を返す関数。</p>
<p>一般に、初期化関数の呼び出しは実行コストがかかる。そのため、初期化関数は <code>eval_func</code> に包んで渡す。 必要な時のみ <code>eval_func</code> の呼び出しを行うことで、呼び出さないパスの高速化ができる。 </p>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00118">118</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_a862bd3224491b431eaff33bc08755ce2_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_a862bd3224491b431eaff33bc08755ce2_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_a862bd3224491b431eaff33bc08755ce2_cgraph" id="aclasskomori_1_1tt_1_1_query_a862bd3224491b431eaff33bc08755ce2_cgraph">
<area shape="rect" title="置換表から結果を集めてきて返す関数。" alt="" coords="5,188,144,229"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#a162edc52658cdbc3c541976858326b73" title="経路ハッシュ値 path_key が保存されているかどうか判定する。" alt="" coords="192,37,387,79"/>
<area shape="rect" href="classkomori_1_1_bit_set.html#a44f83fc0843130cea8ea99086d586a15" title="フラグをすべて true にした BitSet を返す。" alt="" coords="457,161,607,203"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="222,155,357,196"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a11407d50b68b88ce01feff0227ccdf65" title="Unknown（1回目）の探索結果で初期化する" alt="" coords="209,220,369,261"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a0d81252fa8281a46c86b05b609434429" title="千日手の探索結果で初期化する" alt="" coords="209,285,369,327"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a997a66618f04c5215c77ec7c5d3eaa01" title="Unknown（2回目以降）の探索結果で初期化する" alt="" coords="209,351,369,392"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ac3aba5ed8a8a18bb8591d38cb0a050ba" title="index の次のインデックスを求める。" alt="" coords="435,5,629,47"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ab4064a942f6e30221c09712db99d1d28" title="path_key に対する探索開始インデックスを求める。" alt="" coords="435,71,629,112"/>
</map>
</div>

</div>
</div>
<a id="ae11cf79d33310475e709b3001a39ee63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae11cf79d33310475e709b3001a39ee63">&#9670;&nbsp;</a></span>LookUpParent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;<a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>&gt; komori::tt::Query::LookUpParent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> &amp;&#160;</td>
          <td class="paramname"><em>pn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> &amp;&#160;</td>
          <td class="paramname"><em>dn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>置換表に保存された現局面の親局面を取得する </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pn</td><td>現局面のpn </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dn</td><td>現局面のdn </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>現局面の親局面 </dd></dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00181">181</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_ae11cf79d33310475e709b3001a39ee63_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_ae11cf79d33310475e709b3001a39ee63_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_ae11cf79d33310475e709b3001a39ee63_cgraph" id="aclasskomori_1_1tt_1_1_query_ae11cf79d33310475e709b3001a39ee63_cgraph">
<area shape="rect" title="置換表に保存された現局面の親局面を取得する" alt="" coords="5,5,144,47"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="192,5,327,47"/>
</map>
</div>

</div>
</div>
<a id="a5bfc235e68c2c32fcfab1dd88ac25c0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bfc235e68c2c32fcfab1dd88ac25c0c">&#9670;&nbsp;</a></span>SetFinal()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool kIsProven&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void komori::tt::Query::SetFinal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>詰みまたは不詰の探索結果 <code>result</code> を置換表に書き込む </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">kIsProven</td><td>true: 詰み／false: 不詰 </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>探索結果（詰み or 不詰） </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00284">284</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_a5bfc235e68c2c32fcfab1dd88ac25c0c_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_a5bfc235e68c2c32fcfab1dd88ac25c0c_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_a5bfc235e68c2c32fcfab1dd88ac25c0c_cgraph" id="aclasskomori_1_1tt_1_1_query_a5bfc235e68c2c32fcfab1dd88ac25c0c_cgraph">
<area shape="rect" title="詰みまたは不詰の探索結果 result を置換表に書き込む" alt="" coords="5,133,144,175"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af0b32b9f9fff602c03f5ea4ab4e5fff1" title="探索量" alt="" coords="207,35,367,76"/>
<area shape="rect" href="classkomori_1_1tt_1_1_query.html#a75c0a082696f3cd379037b8b0556ca98" title="置換表に hand に一致するエントリがあればそれを返し、なければ作って返す" alt="" coords="218,100,357,141"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a700ff3d262d3aead4ea240af872a8150" title="Final部分の結果。IsFinal() の場合のみ呼び出し可能。" alt="" coords="207,165,367,207"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af353f0cfab41b586a7c994d2507ca699" title="探索時の残り手数" alt="" coords="192,231,383,258"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#ac259de04e6dad6e3c3223570d8337d26" title="保存されている情報が board_key のものかどうか判定する" alt="" coords="444,5,579,47"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="444,71,579,112"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a24bacfcc1ebd8e79cd3e29340e0f1d78" title="エントリの排他ロックを取る" alt="" coords="431,137,592,163"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a2b1919fecc95bae6896ed1ce8cd40ab1" title="エントリの排他ロックを解除する" alt="" coords="444,189,579,231"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a29f2f8973d3016bbc68ba9c69d07d0e7" title="排他ロックを取得する" alt="" coords="640,127,852,168"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a678bfb5327fe28da25a448d1a5f687ae" title="排他ロックを解放する" alt="" coords="640,192,852,233"/>
</map>
</div>

</div>
</div>
<a id="adbef48a41d416069c997ec6315a938de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbef48a41d416069c997ec6315a938de">&#9670;&nbsp;</a></span>SetRepetition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void komori::tt::Query::SetRepetition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>探索結果（千日手） </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00302">302</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_adbef48a41d416069c997ec6315a938de_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_adbef48a41d416069c997ec6315a938de_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_adbef48a41d416069c997ec6315a938de_cgraph" id="aclasskomori_1_1tt_1_1_query_adbef48a41d416069c997ec6315a938de_cgraph">
<area shape="rect" title=" " alt="" coords="5,251,144,292"/>
<area shape="rect" href="classkomori_1_1tt_1_1_query.html#a75c0a082696f3cd379037b8b0556ca98" title="置換表に hand に一致するエントリがあればそれを返し、なければ作って返す" alt="" coords="220,129,359,171"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a700ff3d262d3aead4ea240af872a8150" title="Final部分の結果。IsFinal() の場合のみ呼び出し可能。" alt="" coords="209,217,369,259"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#a31ad235f0eca1b0b49dc04d32df20843" title="経路ハッシュ値 path_key に千日手判定開始深さ depth を設定する" alt="" coords="192,283,387,324"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af353f0cfab41b586a7c994d2507ca699" title="探索時の残り手数" alt="" coords="194,349,385,375"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#ac259de04e6dad6e3c3223570d8337d26" title="保存されている情報が board_key のものかどうか判定する" alt="" coords="465,5,599,47"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="465,71,599,112"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a24bacfcc1ebd8e79cd3e29340e0f1d78" title="エントリの排他ロックを取る" alt="" coords="451,137,613,163"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a2b1919fecc95bae6896ed1ce8cd40ab1" title="エントリの排他ロックを解除する" alt="" coords="465,188,599,229"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a29f2f8973d3016bbc68ba9c69d07d0e7" title="排他ロックを取得する" alt="" coords="677,127,889,168"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a678bfb5327fe28da25a448d1a5f687ae" title="排他ロックを解放する" alt="" coords="677,192,889,233"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ad14e640283025eb47eb9ee518adc0b51" title="ガベージコレクションを行う" alt="" coords="435,305,629,347"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ac3aba5ed8a8a18bb8591d38cb0a050ba" title="index の次のインデックスを求める。" alt="" coords="686,267,881,308"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#ab4064a942f6e30221c09712db99d1d28" title="path_key に対する探索開始インデックスを求める。" alt="" coords="686,351,881,392"/>
</map>
</div>

</div>
</div>
<a id="add5f4c6c79b8cf305918bd62683a0078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add5f4c6c79b8cf305918bd62683a0078">&#9670;&nbsp;</a></span>SetResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void komori::tt::Query::SetResult </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>&#160;</td>
          <td class="paramname"><em>parent_key_hand_pair</em> = <code><a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>{<a class="el" href="namespacekomori.html#a69ee19c9520e168d882df693b6566a9b">kNullKey</a>,&#160;<a class="el" href="namespacekomori.html#a210e0bb519f465c1516790e741bda731">kNullHand</a>}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>探索結果 <code>result</code> を置換表に書き込む </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>探索結果 </td></tr>
    <tr><td class="paramname">parent_key_hand_pair</td><td>親局面の盤面ハッシュ値と持ち駒のペア </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>実際の処理は <code>SetProven()</code>, <code>SetDisproven()</code>, <code><a class="el" href="classkomori_1_1tt_1_1_query.html#adbef48a41d416069c997ec6315a938de">SetRepetition()</a></code>, <code><a class="el" href="classkomori_1_1tt_1_1_query.html#a64af13f9edde082ec5e11ca79c904ee3" title="探索中の探索結果 result を置換表に書き込む関数">SetUnknown()</a></code> を参照。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00234">234</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>

</div>
</div>
<a id="a64af13f9edde082ec5e11ca79c904ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64af13f9edde082ec5e11ca79c904ee3">&#9670;&nbsp;</a></span>SetUnknown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void komori::tt::Query::SetUnknown </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>&#160;</td>
          <td class="paramname"><em>parent_key_hand_pair</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>探索中の探索結果 <code>result</code> を置換表に書き込む関数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>探索結果（探索中） </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ttquery_8hpp_source.html#l00314">314</a> of file <a class="el" href="ttquery_8hpp_source.html">ttquery.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1tt_1_1_query_a64af13f9edde082ec5e11ca79c904ee3_cgraph.png" border="0" usemap="#aclasskomori_1_1tt_1_1_query_a64af13f9edde082ec5e11ca79c904ee3_cgraph" alt=""/></div>
<map name="aclasskomori_1_1tt_1_1_query_a64af13f9edde082ec5e11ca79c904ee3_cgraph" id="aclasskomori_1_1tt_1_1_query_a64af13f9edde082ec5e11ca79c904ee3_cgraph">
<area shape="rect" title="探索中の探索結果 result を置換表に書き込む関数" alt="" coords="5,123,144,164"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af0b32b9f9fff602c03f5ea4ab4e5fff1" title="探索量" alt="" coords="205,5,365,47"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af8b976b730b126e74a8c062f275444e9" title="dn" alt="" coords="192,71,379,98"/>
<area shape="rect" href="classkomori_1_1tt_1_1_query.html#a75c0a082696f3cd379037b8b0556ca98" title="置換表に hand に一致するエントリがあればそれを返し、なければ作って返す" alt="" coords="216,123,355,164"/>
<area shape="rect" href="classkomori_1_1_search_result.html#abfe86f70fc0d0535b1b01057732f6acb" title="Unknown部分の結果。!IsFinal() の場合のみ呼び出し可能。" alt="" coords="205,188,365,229"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a87047b35fcd4a5b7be3b7ee76d8b740c" title="pn" alt="" coords="193,254,377,281"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#ac259de04e6dad6e3c3223570d8337d26" title="保存されている情報が board_key のものかどうか判定する" alt="" coords="440,28,575,69"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="440,93,575,135"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a24bacfcc1ebd8e79cd3e29340e0f1d78" title="エントリの排他ロックを取る" alt="" coords="427,159,588,186"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#a2b1919fecc95bae6896ed1ce8cd40ab1" title="エントリの排他ロックを解除する" alt="" coords="440,212,575,253"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a29f2f8973d3016bbc68ba9c69d07d0e7" title="排他ロックを取得する" alt="" coords="636,149,848,191"/>
<area shape="rect" href="classkomori_1_1_shared_exclusive_lock.html#a678bfb5327fe28da25a448d1a5f687ae" title="排他ロックを解放する" alt="" coords="636,215,848,256"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
