<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KomoringHeights: komori::LocalExpansion Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KomoringHeights
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacekomori.html">komori</a></li><li class="navelem"><a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkomori_1_1_local_expansion-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">komori::LocalExpansion Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>局面の局所展開結果を保持する。  
 <a href="classkomori_1_1_local_expansion.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for komori::LocalExpansion:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion__coll__graph.png" border="0" usemap="#akomori_1_1_local_expansion_coll__map" alt="Collaboration graph"/></div>
<map name="akomori_1_1_local_expansion_coll__map" id="akomori_1_1_local_expansion_coll__map">
<area shape="rect" title="局面の局所展開結果を保持する。" alt="" coords="1600,210,1776,237"/>
<area shape="rect" href="structkomori_1_1_board_key_hand_pair.html" title="盤面ハッシュ値と攻め方の持ち駒のペア。これがあれば TT から結果を取得できる。" alt="" coords="953,37,1148,63"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title=" " alt="" coords="417,5,625,47"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title="operator== から operator!= を自動定義するクラス。" alt="" coords="6,81,199,123"/>
<area shape="rect" href="classkomori_1_1_bit_set.html" title=" " alt="" coords="1220,112,1369,153"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title=" " alt="" coords="425,123,618,164"/>
<area shape="rect" href="structkomori_1_1_define_not_equal_by_equal.html" title=" " alt="" coords="416,188,627,229"/>
<area shape="rect" href="classkomori_1_1_move_picker.html" title="詰将棋探索用の指し手生成器" alt="" coords="1219,241,1370,267"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html" title=" " alt="" coords="1172,291,1417,347"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html" title="サイズ固定のスタック。" alt="" coords="722,299,894,340"/>
<area shape="rect" href="classkomori_1_1_delayed_move_list.html" title="指し手の遅延展開を判断するクラス。" alt="" coords="1201,371,1389,398"/>
<area shape="rect" href="classkomori_1_1_bit_set.html" title="整数 T を用いたフラグ集合。" alt="" coords="732,126,884,153"/>
<area shape="rect" href="classkomori_1_1detail_1_1_mate_len_impl.html" title="MateLen と MateLen16 の実装本体。中身はほぼ同じなので一箇所にまとめる。" alt="" coords="687,195,929,222"/>
<area shape="rect" href="structkomori_1_1_define_comparison_operators_by_less.html" title=" " alt="" coords="405,254,637,310"/>
<area shape="rect" href="structkomori_1_1_define_comparison_operators_by_less.html" title="operator&lt; から各種演算子を自動定義するクラス。" alt="" coords="5,261,200,303"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a617ddabf3c19727746535616e2712c07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a617ddabf3c19727746535616e2712c07">LocalExpansion</a> (<a class="el" href="namespacekomori_1_1tt.html#ab367c034eba59afd3939578f638b0ffb">tt::TranspositionTable</a> &amp;tt, const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;n, <a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a> len, bool first_search, <a class="el" href="namespacekomori.html#a20dc4ee64c842a7caa36c7cf7496ce61">BitSet64</a> sum_mask=<a class="el" href="classkomori_1_1_bit_set.html#a44f83fc0843130cea8ea99086d586a15">BitSet64::Full</a>(), std::uint32_t multi_pv=1)</td></tr>
<tr class="memdesc:a617ddabf3c19727746535616e2712c07"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkomori_1_1_local_expansion.html" title="局面の局所展開結果を保持する。">LocalExpansion</a> を構築する。  <a href="classkomori_1_1_local_expansion.html#a617ddabf3c19727746535616e2712c07">More...</a><br /></td></tr>
<tr class="separator:a617ddabf3c19727746535616e2712c07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a4fffb09b52090bf9b9a5835c8ddea4"><td class="memItemLeft" align="right" valign="top"><a id="a2a4fffb09b52090bf9b9a5835c8ddea4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a2a4fffb09b52090bf9b9a5835c8ddea4">LocalExpansion</a> (const <a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a> &amp;)=delete</td></tr>
<tr class="memdesc:a2a4fffb09b52090bf9b9a5835c8ddea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor(delete) <br /></td></tr>
<tr class="separator:a2a4fffb09b52090bf9b9a5835c8ddea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7daf9ae3b44231d91c275f1095d1dd2a"><td class="memItemLeft" align="right" valign="top"><a id="a7daf9ae3b44231d91c275f1095d1dd2a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a7daf9ae3b44231d91c275f1095d1dd2a">LocalExpansion</a> (<a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a> &amp;&amp;)=delete</td></tr>
<tr class="memdesc:a7daf9ae3b44231d91c275f1095d1dd2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor(delete) <br /></td></tr>
<tr class="separator:a7daf9ae3b44231d91c275f1095d1dd2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de9dbf06f5af455acc130784dcf276e"><td class="memItemLeft" align="right" valign="top"><a id="a0de9dbf06f5af455acc130784dcf276e"></a>
<a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a0de9dbf06f5af455acc130784dcf276e">operator=</a> (const <a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a> &amp;)=delete</td></tr>
<tr class="memdesc:a0de9dbf06f5af455acc130784dcf276e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy assign operator(delete) <br /></td></tr>
<tr class="separator:a0de9dbf06f5af455acc130784dcf276e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada61e8902df16b4b9449adafde8d2074"><td class="memItemLeft" align="right" valign="top"><a id="ada61e8902df16b4b9449adafde8d2074"></a>
<a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ada61e8902df16b4b9449adafde8d2074">operator=</a> (<a class="el" href="classkomori_1_1_local_expansion.html">LocalExpansion</a> &amp;&amp;)=delete</td></tr>
<tr class="memdesc:ada61e8902df16b4b9449adafde8d2074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assign operator(delete) <br /></td></tr>
<tr class="separator:ada61e8902df16b4b9449adafde8d2074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea4f25d6b0c21e3a0e27c65512fec94"><td class="memItemLeft" align="right" valign="top"><a id="acea4f25d6b0c21e3a0e27c65512fec94"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#acea4f25d6b0c21e3a0e27c65512fec94">~LocalExpansion</a> ()=default</td></tr>
<tr class="memdesc:acea4f25d6b0c21e3a0e27c65512fec94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor(default) <br /></td></tr>
<tr class="separator:acea4f25d6b0c21e3a0e27c65512fec94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0dd7ba48200d7c3f7ebcb884817dc1f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ad0dd7ba48200d7c3f7ebcb884817dc1f">empty</a> () const noexcept</td></tr>
<tr class="memdesc:ad0dd7ba48200d7c3f7ebcb884817dc1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">合法手がないかどうか  <a href="classkomori_1_1_local_expansion.html#ad0dd7ba48200d7c3f7ebcb884817dc1f">More...</a><br /></td></tr>
<tr class="separator:ad0dd7ba48200d7c3f7ebcb884817dc1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694216f981a250b39b8ef765a7d2fc76"><td class="memItemLeft" align="right" valign="top">Move&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a694216f981a250b39b8ef765a7d2fc76">BestMove</a> () const</td></tr>
<tr class="memdesc:a694216f981a250b39b8ef765a7d2fc76"><td class="mdescLeft">&#160;</td><td class="mdescRight">現時点の最善手  <a href="classkomori_1_1_local_expansion.html#a694216f981a250b39b8ef765a7d2fc76">More...</a><br /></td></tr>
<tr class="separator:a694216f981a250b39b8ef765a7d2fc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6420e1215e90c8b46af8c7226a32f62"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62">FrontResult</a> () const</td></tr>
<tr class="memdesc:af6420e1215e90c8b46af8c7226a32f62"><td class="mdescLeft">&#160;</td><td class="mdescRight">最善の子の探索結果を取得する  <a href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62">More...</a><br /></td></tr>
<tr class="separator:af6420e1215e90c8b46af8c7226a32f62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79c46683bbd474c4b708d5ef324233c"><td class="memItemLeft" align="right" valign="top"><a id="af79c46683bbd474c4b708d5ef324233c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#af79c46683bbd474c4b708d5ef324233c">DoesHaveOldChild</a> () const</td></tr>
<tr class="memdesc:af79c46683bbd474c4b708d5ef324233c"><td class="mdescLeft">&#160;</td><td class="mdescRight">unproven old child がいるかどうか <br /></td></tr>
<tr class="separator:af79c46683bbd474c4b708d5ef324233c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae6a00cc6de29b0c2602205b4e1e814"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#abae6a00cc6de29b0c2602205b4e1e814">FrontIsFirstVisit</a> () const</td></tr>
<tr class="memdesc:abae6a00cc6de29b0c2602205b4e1e814"><td class="mdescLeft">&#160;</td><td class="mdescRight">最善手の子ノードが初探索かどうか  <a href="classkomori_1_1_local_expansion.html#abae6a00cc6de29b0c2602205b4e1e814">More...</a><br /></td></tr>
<tr class="separator:abae6a00cc6de29b0c2602205b4e1e814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de8b8d220487e7a8b4b28c00461acf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekomori.html#a20dc4ee64c842a7caa36c7cf7496ce61">BitSet64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a4de8b8d220487e7a8b4b28c00461acf9">FrontSumMask</a> () const</td></tr>
<tr class="memdesc:a4de8b8d220487e7a8b4b28c00461acf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">最善手の Sum Mask  <a href="classkomori_1_1_local_expansion.html#a4de8b8d220487e7a8b4b28c00461acf9">More...</a><br /></td></tr>
<tr class="separator:a4de8b8d220487e7a8b4b28c00461acf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed53ef91df46ba1ef9b003bec6838f2a"><td class="memItemLeft" align="right" valign="top"><a id="aed53ef91df46ba1ef9b003bec6838f2a"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#aed53ef91df46ba1ef9b003bec6838f2a">GetAllResults</a> () const</td></tr>
<tr class="memdesc:aed53ef91df46ba1ef9b003bec6838f2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Move, <a class="el" href="classkomori_1_1_search_result.html" title="探索結果をやり取りするためのクラス。">SearchResult</a>) のペアを良さげ順にすべて取得する <br /></td></tr>
<tr class="separator:aed53ef91df46ba1ef9b003bec6838f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b86284bac3fcf5b2de745e2b5376da2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a6b86284bac3fcf5b2de745e2b5376da2">CurrentResult</a> (const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;n) const</td></tr>
<tr class="memdesc:a6b86284bac3fcf5b2de745e2b5376da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面における探索結果を返す  <a href="classkomori_1_1_local_expansion.html#a6b86284bac3fcf5b2de745e2b5376da2">More...</a><br /></td></tr>
<tr class="separator:a6b86284bac3fcf5b2de745e2b5376da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe2ba3b9ec83384f7048de90760edbae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#abe2ba3b9ec83384f7048de90760edbae">UpdateBestChild</a> (const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;search_result)</td></tr>
<tr class="memdesc:abe2ba3b9ec83384f7048de90760edbae"><td class="mdescLeft">&#160;</td><td class="mdescRight">最善手の子の評価値を更新する  <a href="classkomori_1_1_local_expansion.html#abe2ba3b9ec83384f7048de90760edbae">More...</a><br /></td></tr>
<tr class="separator:abe2ba3b9ec83384f7048de90760edbae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8913e080ee09b726e16a2dd4f23091e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a8913e080ee09b726e16a2dd4f23091e9">RewriteImportantChildren</a> ()</td></tr>
<tr class="memdesc:a8913e080ee09b726e16a2dd4f23091e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">重要そうな子局面を改めて置換表に書き直す  <a href="classkomori_1_1_local_expansion.html#a8913e080ee09b726e16a2dd4f23091e9">More...</a><br /></td></tr>
<tr class="separator:a8913e080ee09b726e16a2dd4f23091e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a407d72e5c72f46276e55882d21af13ee"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>, <a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a407d72e5c72f46276e55882d21af13ee">FrontPnDnThresholds</a> (<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> thpn, <a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> thdn) const</td></tr>
<tr class="memdesc:a407d72e5c72f46276e55882d21af13ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">最善手の子の探索で用いる pn と dn のしきい値  <a href="classkomori_1_1_local_expansion.html#a407d72e5c72f46276e55882d21af13ee">More...</a><br /></td></tr>
<tr class="separator:a407d72e5c72f46276e55882d21af13ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb7687064b4b4c158725ef551a3dd87"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#affb7687064b4b4c158725ef551a3dd87">ResolveDoubleCountIfBranchRoot</a> (<a class="el" href="structkomori_1_1_branch_root_edge.html">BranchRootEdge</a> edge)</td></tr>
<tr class="memdesc:affb7687064b4b4c158725ef551a3dd87"><td class="mdescLeft">&#160;</td><td class="mdescRight">二重カウントの起点 <code>edge</code> に一致する枝が子に含まれるなら二重カウントを解消する  <a href="classkomori_1_1_local_expansion.html#affb7687064b4b4c158725ef551a3dd87">More...</a><br /></td></tr>
<tr class="separator:affb7687064b4b4c158725ef551a3dd87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f681726c1f6ab4aa93aac9593f96c48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a0f681726c1f6ab4aa93aac9593f96c48">ShouldStopAncestorSearch</a> (bool branch_root_is_or_node) const</td></tr>
<tr class="memdesc:a0f681726c1f6ab4aa93aac9593f96c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">二重カウント探索をやめるべきかどうか判定する  <a href="classkomori_1_1_local_expansion.html#a0f681726c1f6ab4aa93aac9593f96c48">More...</a><br /></td></tr>
<tr class="separator:a0f681726c1f6ab4aa93aac9593f96c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:acdba010a0f3af21bbd55c7a6ffda1863"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#acdba010a0f3af21bbd55c7a6ffda1863">MakeComparer</a> () const</td></tr>
<tr class="memdesc:acdba010a0f3af21bbd55c7a6ffda1863"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>idx_</code> の比較器を生成する。  <a href="classkomori_1_1_local_expansion.html#acdba010a0f3af21bbd55c7a6ffda1863">More...</a><br /></td></tr>
<tr class="separator:acdba010a0f3af21bbd55c7a6ffda1863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40d95fbb784281a50322f62559cccd6"><td class="memItemLeft" align="right" valign="top"><a id="ae40d95fbb784281a50322f62559cccd6"></a>
<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ae40d95fbb784281a50322f62559cccd6">GetPn</a> () const</td></tr>
<tr class="memdesc:ae40d95fbb784281a50322f62559cccd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pn を計算する <br /></td></tr>
<tr class="separator:ae40d95fbb784281a50322f62559cccd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ca1e4127441aabb77abd505922cbb5"><td class="memItemLeft" align="right" valign="top"><a id="a41ca1e4127441aabb77abd505922cbb5"></a>
<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a41ca1e4127441aabb77abd505922cbb5">GetDn</a> () const</td></tr>
<tr class="memdesc:a41ca1e4127441aabb77abd505922cbb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dn を計算する <br /></td></tr>
<tr class="separator:a41ca1e4127441aabb77abd505922cbb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee599a02eef43101948fa6cdb6814fb4"><td class="memItemLeft" align="right" valign="top"><a id="aee599a02eef43101948fa6cdb6814fb4"></a>
<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#aee599a02eef43101948fa6cdb6814fb4">GetPhi</a> () const</td></tr>
<tr class="memdesc:aee599a02eef43101948fa6cdb6814fb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">phi 値を計算する <br /></td></tr>
<tr class="separator:aee599a02eef43101948fa6cdb6814fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49df843166b8d1455bd53280eb7f690"><td class="memItemLeft" align="right" valign="top"><a id="ab49df843166b8d1455bd53280eb7f690"></a>
<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ab49df843166b8d1455bd53280eb7f690">GetDelta</a> () const</td></tr>
<tr class="memdesc:ab49df843166b8d1455bd53280eb7f690"><td class="mdescLeft">&#160;</td><td class="mdescRight">delta 値を計算する <br /></td></tr>
<tr class="separator:ab49df843166b8d1455bd53280eb7f690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43793b72731e05e49095ff2e1183e72a"><td class="memItemLeft" align="right" valign="top"><a id="a43793b72731e05e49095ff2e1183e72a"></a>
constexpr <a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a43793b72731e05e49095ff2e1183e72a">GetSecondPhi</a> () const</td></tr>
<tr class="memdesc:a43793b72731e05e49095ff2e1183e72a"><td class="mdescLeft">&#160;</td><td class="mdescRight">2番目の子の phi 値を計算する <br /></td></tr>
<tr class="separator:a43793b72731e05e49095ff2e1183e72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c22346049a444d6065709e5e3140d16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a3c22346049a444d6065709e5e3140d16">NewThdeltaForBestMove</a> (<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> thdelta) const</td></tr>
<tr class="memdesc:a3c22346049a444d6065709e5e3140d16"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の delta しきい値が <code>thdelta</code> のとき、子局面の delta しきい値を計算する  <a href="classkomori_1_1_local_expansion.html#a3c22346049a444d6065709e5e3140d16">More...</a><br /></td></tr>
<tr class="separator:a3c22346049a444d6065709e5e3140d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9510c937ce218cc0334a5434b555d270"><td class="memItemLeft" align="right" valign="top"><a id="a9510c937ce218cc0334a5434b555d270"></a>
constexpr void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a9510c937ce218cc0334a5434b555d270">RecalcDelta</a> ()</td></tr>
<tr class="memdesc:a9510c937ce218cc0334a5434b555d270"><td class="mdescLeft">&#160;</td><td class="mdescRight">δ値の一時変数 <code>sum_delta_except_best_</code>, <code>max_delta_except_best_</code> を計算し直す <br /></td></tr>
<tr class="separator:a9510c937ce218cc0334a5434b555d270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17108ba9ff06835351cfd91bbcbfc9c1"><td class="memItemLeft" align="right" valign="top"><a id="a17108ba9ff06835351cfd91bbcbfc9c1"></a>
<a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a17108ba9ff06835351cfd91bbcbfc9c1">GetWinResult</a> (const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;n) const</td></tr>
<tr class="memdesc:a17108ba9ff06835351cfd91bbcbfc9c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">探索結果を取得する（手番側から見て勝ち局面） <br /></td></tr>
<tr class="separator:a17108ba9ff06835351cfd91bbcbfc9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35831c841b25716f8d40e4c715d3634e"><td class="memItemLeft" align="right" valign="top"><a id="a35831c841b25716f8d40e4c715d3634e"></a>
<a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a35831c841b25716f8d40e4c715d3634e">GetLoseResult</a> (const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;n) const</td></tr>
<tr class="memdesc:a35831c841b25716f8d40e4c715d3634e"><td class="mdescLeft">&#160;</td><td class="mdescRight">探索結果を取得する（手番側から見て負け局面） <br /></td></tr>
<tr class="separator:a35831c841b25716f8d40e4c715d3634e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dce0af5754980303ae433b97981f785"><td class="memItemLeft" align="right" valign="top"><a id="a1dce0af5754980303ae433b97981f785"></a>
<a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a1dce0af5754980303ae433b97981f785">GetUnknownResult</a> (const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;) const</td></tr>
<tr class="memdesc:a1dce0af5754980303ae433b97981f785"><td class="mdescLeft">&#160;</td><td class="mdescRight">探索結果を取得する（不明局面） <br /></td></tr>
<tr class="separator:a1dce0af5754980303ae433b97981f785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c12378417149d76d98586832018ab1"><td class="memItemLeft" align="right" valign="top"><a id="a99c12378417149d76d98586832018ab1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a99c12378417149d76d98586832018ab1">ResortFront</a> ()</td></tr>
<tr class="memdesc:a99c12378417149d76d98586832018ab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">先頭以外がソートされた状態のとき、先頭要素を適切な位置に挿入する <br /></td></tr>
<tr class="separator:a99c12378417149d76d98586832018ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af775297809f84ea9b90f806b7b757463"><td class="memItemLeft" align="right" valign="top"><a id="af775297809f84ea9b90f806b7b757463"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#af775297809f84ea9b90f806b7b757463">ResortBack</a> ()</td></tr>
<tr class="memdesc:af775297809f84ea9b90f806b7b757463"><td class="mdescLeft">&#160;</td><td class="mdescRight">末尾以外がソートされた状態のとき、末尾要素を適切な位置に挿入する <br /></td></tr>
<tr class="separator:af775297809f84ea9b90f806b7b757463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a527e2cbb915cbeadd0002be0ab302"><td class="memItemLeft" align="right" valign="top"><a id="ab4a527e2cbb915cbeadd0002be0ab302"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ab4a527e2cbb915cbeadd0002be0ab302">ResortExcludedBack</a> ()</td></tr>
<tr class="memdesc:ab4a527e2cbb915cbeadd0002be0ab302"><td class="mdescLeft">&#160;</td><td class="mdescRight">[0, excluded_moves_] の末尾以外がソートされた状態のとき、末尾要素を適切な位置に挿入する <br /></td></tr>
<tr class="separator:ab4a527e2cbb915cbeadd0002be0ab302"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aaed39a361de47445fcfacea95e42ef48"><td class="memItemLeft" align="right" valign="top"><a id="aaed39a361de47445fcfacea95e42ef48"></a>
const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#aaed39a361de47445fcfacea95e42ef48">or_node_</a></td></tr>
<tr class="memdesc:aaed39a361de47445fcfacea95e42ef48"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面が OR node かどうか <br /></td></tr>
<tr class="separator:aaed39a361de47445fcfacea95e42ef48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d97eb387d9f6ef66fdf37e5dfe0eb7"><td class="memItemLeft" align="right" valign="top"><a id="a33d97eb387d9f6ef66fdf37e5dfe0eb7"></a>
const <a class="el" href="classkomori_1_1_move_picker.html">MovePicker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a33d97eb387d9f6ef66fdf37e5dfe0eb7">mp_</a></td></tr>
<tr class="memdesc:a33d97eb387d9f6ef66fdf37e5dfe0eb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の合法手 <br /></td></tr>
<tr class="separator:a33d97eb387d9f6ef66fdf37e5dfe0eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af624839846598ba7e50e5d9c0f3baa8f"><td class="memItemLeft" align="right" valign="top"><a id="af624839846598ba7e50e5d9c0f3baa8f"></a>
const <a class="el" href="classkomori_1_1_delayed_move_list.html">DelayedMoveList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#af624839846598ba7e50e5d9c0f3baa8f">delayed_move_list_</a></td></tr>
<tr class="memdesc:af624839846598ba7e50e5d9c0f3baa8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">後回しにしている手のグラフ構造 <br /></td></tr>
<tr class="separator:af624839846598ba7e50e5d9c0f3baa8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00af95d7abac5c90bddafccc5eeb5024"><td class="memItemLeft" align="right" valign="top"><a id="a00af95d7abac5c90bddafccc5eeb5024"></a>
const <a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a00af95d7abac5c90bddafccc5eeb5024">len_</a></td></tr>
<tr class="memdesc:a00af95d7abac5c90bddafccc5eeb5024"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面における残り探索手数 <br /></td></tr>
<tr class="separator:a00af95d7abac5c90bddafccc5eeb5024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a437f9b7323c9ef249ff8fc709def66c2"><td class="memItemLeft" align="right" valign="top"><a id="a437f9b7323c9ef249ff8fc709def66c2"></a>
const <a class="el" href="structkomori_1_1_board_key_hand_pair.html">BoardKeyHandPair</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a437f9b7323c9ef249ff8fc709def66c2">key_hand_pair_</a></td></tr>
<tr class="memdesc:a437f9b7323c9ef249ff8fc709def66c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の盤面ハッシュ値と持ち駒。二重カウント対策で用いる。 <br /></td></tr>
<tr class="separator:a437f9b7323c9ef249ff8fc709def66c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27182227ec2b1fe07c244a088b11f55c"><td class="memItemLeft" align="right" valign="top"><a id="a27182227ec2b1fe07c244a088b11f55c"></a>
const std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a27182227ec2b1fe07c244a088b11f55c">multi_pv_</a></td></tr>
<tr class="memdesc:a27182227ec2b1fe07c244a088b11f55c"><td class="mdescLeft">&#160;</td><td class="mdescRight">MultiPv の値。1以上でなければならない <br /></td></tr>
<tr class="separator:a27182227ec2b1fe07c244a088b11f55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab28b16455a3cd30d1b67d62bce9242cf"><td class="memItemLeft" align="right" valign="top"><a id="ab28b16455a3cd30d1b67d62bce9242cf"></a>
std::array&lt; <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>, <a class="el" href="namespacekomori.html#ae28c3e91f330fe95ecf24570473e6a08">kMaxCheckMovesPerNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ab28b16455a3cd30d1b67d62bce9242cf">results_</a></td></tr>
<tr class="memdesc:ab28b16455a3cd30d1b67d62bce9242cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">子の現在の評価値結果一覧 <br /></td></tr>
<tr class="separator:ab28b16455a3cd30d1b67d62bce9242cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674353cee4babba9ed5c3e9a0e029798"><td class="memItemLeft" align="right" valign="top"><a id="a674353cee4babba9ed5c3e9a0e029798"></a>
std::array&lt; <a class="el" href="classkomori_1_1tt_1_1_query.html">tt::Query</a>, <a class="el" href="namespacekomori.html#ae28c3e91f330fe95ecf24570473e6a08">kMaxCheckMovesPerNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a674353cee4babba9ed5c3e9a0e029798">queries_</a></td></tr>
<tr class="memdesc:a674353cee4babba9ed5c3e9a0e029798"><td class="mdescLeft">&#160;</td><td class="mdescRight">子のクエリ一覧。コンストラクト時に作ったクエリを使い回すことで高速化できる <br /></td></tr>
<tr class="separator:a674353cee4babba9ed5c3e9a0e029798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab963368e1881584e1f2fea173ba92e3e"><td class="memItemLeft" align="right" valign="top"><a id="ab963368e1881584e1f2fea173ba92e3e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ab963368e1881584e1f2fea173ba92e3e">does_have_old_child_</a> {false}</td></tr>
<tr class="memdesc:ab963368e1881584e1f2fea173ba92e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">現局面の評価値が古い探索情報に基づくものかどうか。TCA の探索延長の判断に用いる。 <br /></td></tr>
<tr class="separator:ab963368e1881584e1f2fea173ba92e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a349d17cc4f7d8504bfbfba76996adb1f"><td class="memItemLeft" align="right" valign="top"><a id="a349d17cc4f7d8504bfbfba76996adb1f"></a>
<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a349d17cc4f7d8504bfbfba76996adb1f">sum_delta_except_best_</a></td></tr>
<tr class="memdesc:a349d17cc4f7d8504bfbfba76996adb1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">和でδを計上する子のうち最善手・excluded_moves_ を除いたもののδ値の和 <br /></td></tr>
<tr class="separator:a349d17cc4f7d8504bfbfba76996adb1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac50f3fe055e46a7cd3c48a8fdf9813cf"><td class="memItemLeft" align="right" valign="top"><a id="ac50f3fe055e46a7cd3c48a8fdf9813cf"></a>
<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#ac50f3fe055e46a7cd3c48a8fdf9813cf">max_delta_except_best_</a></td></tr>
<tr class="memdesc:ac50f3fe055e46a7cd3c48a8fdf9813cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">最大値でδを計上する子のうち最善手・excluded_moves_ を除いたもののδ値の最大値 <br /></td></tr>
<tr class="separator:ac50f3fe055e46a7cd3c48a8fdf9813cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01462b53733c1184e9e0a014420e2255"><td class="memItemLeft" align="right" valign="top"><a id="a01462b53733c1184e9e0a014420e2255"></a>
<a class="el" href="namespacekomori.html#a20dc4ee64c842a7caa36c7cf7496ce61">BitSet64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a01462b53733c1184e9e0a014420e2255">sum_mask_</a></td></tr>
<tr class="memdesc:a01462b53733c1184e9e0a014420e2255"><td class="mdescLeft">&#160;</td><td class="mdescRight">δ値を和で計算すべき子の一覧。ビットが立っている子は和、立っていない子は最大値で計上する。 <br /></td></tr>
<tr class="separator:a01462b53733c1184e9e0a014420e2255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af53ce04572548093a1154b3ab0111281"><td class="memItemLeft" align="right" valign="top"><a id="af53ce04572548093a1154b3ab0111281"></a>
<a class="el" href="classkomori_1_1_fixed_size_stack.html">FixedSizeStack</a>&lt; std::uint32_t, <a class="el" href="namespacekomori.html#ae28c3e91f330fe95ecf24570473e6a08">kMaxCheckMovesPerNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#af53ce04572548093a1154b3ab0111281">idx_</a></td></tr>
<tr class="memdesc:af53ce04572548093a1154b3ab0111281"><td class="mdescLeft">&#160;</td><td class="mdescRight">現在有効な生添字の一覧。「良さ順」で並んでいる。 <br /></td></tr>
<tr class="separator:af53ce04572548093a1154b3ab0111281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc1c821586951371dc2792ecc1bdd2e"><td class="memItemLeft" align="right" valign="top"><a id="a0fc1c821586951371dc2792ecc1bdd2e"></a>
std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a0fc1c821586951371dc2792ecc1bdd2e">excluded_moves_</a> {0}</td></tr>
<tr class="memdesc:a0fc1c821586951371dc2792ecc1bdd2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">勝ちになる手を見つけた個数 multi_pv_ == 1 のときは、この値は常に 0 である。multi_pv_ &gt; 1 のとき、勝ち（phi==0）を見つけた後に探索を続ける 際に用いる。常に excluded_moves_ &lt;= multi_pv_ - 1 かつ excluded_moves_ &lt;= mp_.size() である。 <br /></td></tr>
<tr class="separator:a0fc1c821586951371dc2792ecc1bdd2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee1975863574b38a5e3ece53d193d67"><td class="memItemLeft" align="right" valign="top"><a id="a9ee1975863574b38a5e3ece53d193d67"></a>
<a class="el" href="namespacekomori.html#a077cff4c0bde489c0330a39b102a21bf">SearchAmount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkomori_1_1_local_expansion.html#a9ee1975863574b38a5e3ece53d193d67">max_child_amount_</a> {1}</td></tr>
<tr class="memdesc:a9ee1975863574b38a5e3ece53d193d67"><td class="mdescLeft">&#160;</td><td class="mdescRight">子局面の探索量の最大値。本当は和を取りたいが、そうすると二重カウントによりオーバーフローする可能性があるのでダメ。 <br /></td></tr>
<tr class="separator:a9ee1975863574b38a5e3ece53d193d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>局面の局所展開結果を保持する。 </p>
<p>現局面の子ノードの展開結果を一時的に保持するクラス。前回の置換表 LookUp 結果を保持しておくことで、 置換表 LookUp 回数をへらすことが目的である。また、高速 2 手詰めルーチンを内蔵したりδ値を事前計算しておいたりなど、 高速化のために小手先高速化が詰め込まれている。</p>
<h2><a class="anchor" id="autotoc_md2"></a>
実装詳細</h2>
<h3><a class="anchor" id="autotoc_md3"></a>
生添字（i_raw）</h3>
<p>同じ局面 <code>n</code> に対し、<code><a class="el" href="classkomori_1_1_move_picker.html" title="詰将棋探索用の指し手生成器">MovePicker</a></code> は常に同じ順番の指し手を生成する。つまり、<code><a class="el" href="classkomori_1_1_move_picker.html" title="詰将棋探索用の指し手生成器">MovePicker</a></code> の添字により指し手を 一意に特定できる。このように、任意の指し手 <code>m</code> に対し、<code><a class="el" href="classkomori_1_1_move_picker.html" title="詰将棋探索用の指し手生成器">MovePicker</a></code> における添字を <code>m</code> の生添字（raw index）と呼び、 変数 <code>i_raw</code> により表現する。</p>
<h3><a class="anchor" id="autotoc_md4"></a>
添字スタック（idx_）</h3>
<p>探索中に「良さげ順」に生添字の並び替えを行いたい。このような生添字のリストが添え字スタック <code>idx</code>である。 探索結果の配列 <code>results_</code> を直接並び替えるのではなく <code>idx_</code> を並び替えることで、並び替えにかかる命令数を 削減することができる。また、添字スタックを経由してアクセスすることで、<code>mp_</code> や <code>sum_mask_</code> を「良さげ順」で アクセスすることができる。</p>
<p>スタック構造を活かして探索中に <code>idx_</code> へ生添字を追加することもできる。これは、 指し手の遅延展開（<code>delayed_move_list_</code>）に用いられる。</p>
<h3><a class="anchor" id="autotoc_md5"></a>
δ値の計算（sum_delta_except_best_, max_delta_except_best_, sum_mask）</h3>
<p>現局面のδ値は、和で計上する子の集合 sum_child と最大値で計上する子の集合 max_child を用いて δ = Σ_[i in sum_child] δ_i + max_[i in max_child] δ_i により計算できる。また、子ノードにおける探索取りやめのδ値のしきい値 thdelta_i は、 「現局面のδしきい値 thdelta をこえるようなδ_i の最大値」により定義される。</p>
<p>まともに計算すると、「δ値」と「子のδしきい値」で2回でこの計算が必要になる。この計算は 探索中にとても頻繁に現れる計算であるため、できる限り計算量を削減したい。そのため、 「最善手を除いた sum_child のδ値の和 <code>sum_delta_except_best_</code>」と「最善手を除いた max_child の δ値の最大値 <code>max_delta_except_best_</code>」を事前に計算しておく。これら2つの変数があれば、 「δ値」と「子のδしきい値」をどちらも短時間で計算できる。また、これらの値は多くの場合において、 差分計算で効率よく更新できることもポイントである。</p>
<p>δ値を和で計上するか最大値で計上するかは <code>sum_mask_</code> で管理している。<code>sum_mask_</code> のビットが立っている子は 和で、立っていない子は最大値でδ値を計上する。「和」の方にビットを立てるようにしている理由は、 仮に子の個数が 64 個を超える場合は最大値で計上したいから。</p>
<p>基本的には legacy df-pn のように和で計上するが、<code><a class="el" href="namespacekomori.html#a09690cec75eb5532478fb7cb04aafcb8" title="move はδ値をsumで計算すべきか／maxで計上すべきかを判定する">IsSumDeltaNode()</a></code> に当てはまるノードと二重カウント検出された子は 最大値で計算することでδ値の発散を抑える。</p>
<h3><a class="anchor" id="autotoc_md6"></a>
MultiPV</h3>
<p>multi_pv &gt; 1 のとき、勝ちになる手が見つかった後も multi_pv 個の勝ちが見つかるまでは探索を続ける。ここで、 勝ちになる手とは OR node では詰む手、AND node では不詰になる手のことである。</p>
<p>勝ちになる手は、以降の探索から除外される。除外されている手の個数は <code>excluded_moves_</code> で管理されている。 <code><a class="el" href="classkomori_1_1_local_expansion.html#a694216f981a250b39b8ef765a7d2fc76" title="現時点の最善手">BestMove()</a></code> や <code><a class="el" href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62" title="最善の子の探索結果を取得する">FrontResult()</a></code> で現時点の最善手を取得するとき、除外された手は最善手に含まれないので注意すること。 </p>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00103">103</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a617ddabf3c19727746535616e2712c07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a617ddabf3c19727746535616e2712c07">&#9670;&nbsp;</a></span>LocalExpansion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">komori::LocalExpansion::LocalExpansion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekomori_1_1tt.html#ab367c034eba59afd3939578f638b0ffb">tt::TranspositionTable</a> &amp;&#160;</td>
          <td class="paramname"><em>tt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#af2c3856a7c53116227693f8dcca64199">MateLen</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first_search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#a20dc4ee64c842a7caa36c7cf7496ce61">BitSet64</a>&#160;</td>
          <td class="paramname"><em>sum_mask</em> = <code><a class="el" href="classkomori_1_1_bit_set.html#a44f83fc0843130cea8ea99086d586a15">BitSet64::Full</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>multi_pv</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classkomori_1_1_local_expansion.html" title="局面の局所展開結果を保持する。">LocalExpansion</a> を構築する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tt</td><td>置換表 </td></tr>
    <tr><td class="paramname">n</td><td>現局面 </td></tr>
    <tr><td class="paramname">len</td><td>残り詰み手数 </td></tr>
    <tr><td class="paramname">first_search</td><td>初回探索なら <code>true</code>。<code>true</code> なら高速 1 手詰めルーチンを走らせる。 </td></tr>
    <tr><td class="paramname">sum_mask</td><td>δ値を和で計算する子の集合 </td></tr>
    <tr><td class="paramname">multi_pv</td><td>勝ちになる手をいくつ見つけるか。1以上でなければならない </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00138">138</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a617ddabf3c19727746535616e2712c07_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a617ddabf3c19727746535616e2712c07_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a617ddabf3c19727746535616e2712c07_cgraph" id="aclasskomori_1_1_local_expansion_a617ddabf3c19727746535616e2712c07_cgraph">
<area shape="rect" title="LocalExpansion を構築する。" alt="" coords="5,947,181,989"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5ee11c692c6bfa5698cffdbcfdd02929" title="イテレータの開始位置" alt="" coords="250,177,422,218"/>
<area shape="rect" href="classkomori_1_1tt_1_1detail_1_1_transposition_table_impl.html#a2a0f0621bb26449fdf6d8c00a8600d7e" title="局面 n を move で 1 手進めたエントリを読み書きするためのクエリを返す" alt="" coords="247,308,425,364"/>
<area shape="rect" href="classkomori_1_1_node.html#ac82d1552c36647cc88e62b104b77595d" title="move 後の攻め方の持ち駒" alt="" coords="513,388,711,415"/>
<area shape="rect" href="namespacekomori_1_1detail.html#a730c115105733a5cbffe37428c86ce5a" title="OR node n を move した局面が自明な詰み／不詰かどうかを判定する。" alt="" coords="229,977,443,1018"/>
<area shape="rect" href="classkomori_1_1_node.html#a082d5d0045420c8978206fda2b518e17" title="move で1手進める" alt="" coords="801,507,972,533"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a122fd54c4b21ad3d1ce129cf1b2d6f3f" title="val をスタックに追加する" alt="" coords="1060,625,1232,666"/>
<area shape="rect" href="classkomori_1_1_node.html#aad7fe2734b150a1d9645ea72e2fdda83" title="DoMove() で進めた局面を元に戻す" alt="" coords="793,573,980,600"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a30a23ee0ab5980d4fad72185cafed9d0" title="スタックから要素を1つ削除する" alt="" coords="1044,792,1248,819"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a2c7ae503860768e494c2fc41ddeb9270" title="イテレータの終了位置" alt="" coords="234,1093,438,1120"/>
<area shape="rect" href="namespacekomori.html#a5c6a82becf6ccac969ecceaf30f5b95a" title="初めて訪れた局面の pn/dn 初期値を計算する" alt="" coords="263,693,409,720"/>
<area shape="rect" href="classkomori_1_1_node.html#a38f310d0efd41fc2f4c376fdf44c7210" title="move をすると千日手または劣等局面になるかどうか" alt="" coords="239,242,433,283"/>
<area shape="rect" href="namespacekomori.html#a09690cec75eb5532478fb7cb04aafcb8" title="move はδ値をsumで計算すべきか／maxで計上すべきかを判定する" alt="" coords="520,1027,704,1053"/>
<area shape="rect" href="classkomori_1_1tt_1_1_query.html#a862bd3224491b431eaff33bc08755ce2" title="置換表から結果を集めてきて返す関数。" alt="" coords="267,1194,405,1235"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a0d81252fa8281a46c86b05b609434429" title="千日手の探索結果で初期化する" alt="" coords="532,1442,692,1483"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#acdba010a0f3af21bbd55c7a6ffda1863" title="idx_ の比較器を生成する。" alt="" coords="248,1311,424,1353"/>
<area shape="rect" href="classkomori_1_1_delayed_move_list.html#acb1d55f9cd3730805372ac24fd5229fe" title="i_raw の直前に展開すべき手のインデックスを返す。" alt="" coords="242,1377,430,1418"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a9510c937ce218cc0334a5434b555d270" title="δ値の一時変数 sum_delta_except_best_, max_delta_except_best_ を計算し直す" alt="" coords="248,1471,424,1513"/>
<area shape="rect" href="classkomori_1_1_bit_set.html#a4d85204891b7f94b52e8e538325a9efd" title="i 番目のフラグを false に設定する。" alt="" coords="257,1537,415,1564"/>
<area shape="rect" href="classkomori_1_1_node.html#a19fbde5adf6e542e61f6c620df5b4d16" title="現在の探索深さ" alt="" coords="523,489,701,516"/>
<area shape="rect" href="classkomori_1_1_node.html#a485678f91b4653d87fcf5ee6071351de" title="このクラスが保持する Position への参照" alt="" coords="1309,657,1449,684"/>
<area shape="rect" href="classkomori_1_1_node.html#a6dfeb2e63ce33d5b9043010cbb8428c3" title="move 後の経路ハッシュ値" alt="" coords="1046,5,1246,32"/>
<area shape="rect" href="classkomori_1_1tt_1_1_regular_table.html#aa6ac86c8e1152cbe7a18e8d81a55fcef" title="board_key に対応する循環領域へのポインタを取得する" alt="" coords="523,247,701,289"/>
<area shape="rect" href="namespacekomori.html#ae5838f0a6fe258eb2bc0197498cd7358" title="move 後の手駒を返す" alt="" coords="817,355,957,381"/>
<area shape="rect" href="classkomori_1_1_node.html#a4340f73789f45570ffe593fc9d0aafa9" title="現在 OR node かどうか" alt="" coords="798,824,975,851"/>
<area shape="rect" href="classkomori_1_1_node.html#a2c10b9d22f4966f51b47495088f4fd4b" title="現在の攻め方の持ち駒" alt="" coords="1063,405,1229,432"/>
<area shape="rect" href="classkomori_1_1_node.html#acd0ed0838fa087e459aadae9cf563b0c" title="現在の手番" alt="" coords="1079,944,1213,971"/>
<area shape="rect" href="namespacekomori.html#ae0ab7ef1101897b620e05208fc8975ee" title="現在の path_key と手 move から1手後の path_key を計算する。" alt="" coords="1300,5,1459,32"/>
<area shape="rect" href="namespacekomori.html#af60b97ffafc4e100347e046e86ef02ac" title="(OR node限定) n が 1 手詰かどうか判定する。" alt="" coords="524,773,700,800"/>
<area shape="rect" href="namespacekomori.html#afa08995342dc8f460d6de738cd457571" title="(OR node限定) n が不詰かどうかを簡易的に調べる。" alt="" coords="491,976,733,1003"/>
<area shape="rect" href="namespacekomori.html#ace83f8e2ffff818bd25b6def2e075904" title="move 後の手駒が after_hand のとき、移動前の持ち駒を返す" alt="" coords="811,723,963,749"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5f9f4c0e10424bb96f652c18cfc6afc7" title="スタックの末尾（最も後に保存した要素）" alt="" coords="1060,507,1232,549"/>
<area shape="rect" href="classkomori_1_1_node.html#afc3ff609d7a14aae03aab36317148f63" title="現在の盤面ハッシュ値" alt="" coords="1057,573,1235,600"/>
<area shape="rect" href="classkomori_1_1_visit_history.html#a3ba89e53fbe90e03b07b2c68eea98334" title="(board_key, hand) を履歴に登録する" alt="" coords="1071,122,1221,163"/>
<area shape="rect" href="classkomori_1_1_visit_history.html#a62769876f5547de5b474300c666cea8a" title="index の次のインデックスを求める" alt="" coords="1304,154,1455,195"/>
<area shape="rect" href="classkomori_1_1_visit_history.html#ab3ed82ca4c526f4f34c90c9277ba7d5b" title="board_key に対する探索開始インデックスを求める" alt="" coords="1304,89,1455,130"/>
<area shape="rect" href="classkomori_1_1_visit_history.html#a3af0755f672c9b15c72253aebc682aa5" title="(board_key, hand) を履歴から消す" alt="" coords="1071,187,1221,229"/>
<area shape="rect" href="classkomori_1_1_node.html#a7f1c13d7f57b6af7f34ac77240342d71" title="move 直前の経路ハッシュ値" alt="" coords="1040,691,1252,717"/>
<area shape="rect" href="namespacekomori_1_1detail.html#a56e953984699bd0e99000f56bc96dcb9" title="df&#45;pn+における AND node の pn/dn 初期値を計算する" alt="" coords="525,591,699,633"/>
<area shape="rect" href="namespacekomori_1_1detail.html#a7e8c39e028338e1c24e97418bf751772" title="df&#45;pn+における OR node の pn/dn 初期値を計算する" alt="" coords="525,657,699,698"/>
<area shape="rect" href="classkomori_1_1_node.html#ab47757b0ecd5c40af2b2246a17477a13" title="move 後の盤面ハッシュ値" alt="" coords="781,211,992,237"/>
<area shape="rect" href="classkomori_1_1_visit_history.html#a2ff15618b56e74ace00b9b57434fec4f" title="(board_key, hand) の優等局面が履歴に記録されているか調べる。" alt="" coords="1071,57,1221,98"/>
<area shape="rect" href="classkomori_1_1_node.html#af2b9d2ba13ac5a9536d6aa1b618d2753" title="AND node（玉方）の手番" alt="" coords="799,976,975,1003"/>
<area shape="rect" href="classkomori_1_1tt_1_1_repetition_table.html#a162edc52658cdbc3c541976858326b73" title="経路ハッシュ値 path_key が保存されているかどうか判定する。" alt="" coords="515,1259,709,1301"/>
<area shape="rect" href="classkomori_1_1_bit_set.html#a44f83fc0843130cea8ea99086d586a15" title="フラグをすべて true にした BitSet を返す。" alt="" coords="812,1354,961,1395"/>
<area shape="rect" href="classkomori_1_1tt_1_1_entry.html#af1969c3d079ea4a462df415e5ce4ec1b" title="エントリが未使用状態かを判定する。この関数に限っては共有ロックを取得せずに使用することができる。" alt="" coords="545,1129,679,1170"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a11407d50b68b88ce01feff0227ccdf65" title="Unknown（1回目）の探索結果で初期化する" alt="" coords="532,1325,692,1366"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a997a66618f04c5215c77ec7c5d3eaa01" title="Unknown（2回目以降）の探索結果で初期化する" alt="" coords="532,1194,692,1235"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="537,1559,687,1585"/>
<area shape="rect" href="namespacekomori.html#ae2a1de257f1363b6f913c501fa5c43c1" title="Iterable の先頭 kSkip 要素をスキップする" alt="" coords="561,1508,663,1535"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a694216f981a250b39b8ef765a7d2fc76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a694216f981a250b39b8ef765a7d2fc76">&#9670;&nbsp;</a></span>BestMove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Move komori::LocalExpansion::BestMove </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>現時点の最善手 </p>
<dl class="section pre"><dt>Precondition</dt><dd>!Current().IsFinal() </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00241">241</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>

</div>
</div>
<a id="a6b86284bac3fcf5b2de745e2b5376da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b86284bac3fcf5b2de745e2b5376da2">&#9670;&nbsp;</a></span>CurrentResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> komori::LocalExpansion::CurrentResult </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_node.html">Node</a> &amp;&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>現局面における探索結果を返す </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>現局面 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>n</code> がコンストラクト時に渡されたものと同じ局面 </dd></dl>
<dl class="section note"><dt>Note</dt><dd><code>!CurrentResult(n).IsFinal()</code> ならば <code>!empty()</code> が成り立つ。これを利用して <code>!empty()</code> のチェックを スキップすることがある。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00280">280</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a6b86284bac3fcf5b2de745e2b5376da2_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a6b86284bac3fcf5b2de745e2b5376da2_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a6b86284bac3fcf5b2de745e2b5376da2_cgraph" id="aclasskomori_1_1_local_expansion_a6b86284bac3fcf5b2de745e2b5376da2_cgraph">
<area shape="rect" title="現局面における探索結果を返す" alt="" coords="5,312,181,353"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#ab49df843166b8d1455bd53280eb7f690" title="delta 値を計算する" alt="" coords="707,123,883,164"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a35831c841b25716f8d40e4c715d3634e" title="探索結果を取得する（手番側から見て負け局面）" alt="" coords="453,607,629,648"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#aee599a02eef43101948fa6cdb6814fb4" title="phi 値を計算する" alt="" coords="707,188,883,229"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a1dce0af5754980303ae433b97981f785" title="探索結果を取得する（不明局面）" alt="" coords="229,253,405,295"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a17108ba9ff06835351cfd91bbcbfc9c1" title="探索結果を取得する（手番側から見て勝ち局面）" alt="" coords="453,829,629,871"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="980,71,1131,98"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a0d9c7779d27ccf538345227559b69fd9" title="スタックが空かどうか" alt="" coords="969,5,1141,47"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62" title="最善の子の探索結果を取得する" alt="" coords="967,188,1143,229"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5e99daa3af91a53273900789df53aee8" title="スタックに保存されている要素数" alt="" coords="969,123,1141,164"/>
<area shape="rect" href="classkomori_1_1_move_picker.html#a94848cbebf11d7f272a8360cdfc5f1ff" title="現局面の合法手の個数を返す。" alt="" coords="980,413,1131,455"/>
<area shape="rect" href="namespacekomori.html#ace83f8e2ffff818bd25b6def2e075904" title="move 後の手駒が after_hand のとき、移動前の持ち駒を返す" alt="" coords="719,807,871,834"/>
<area shape="rect" href="classkomori_1_1_move_picker.html#aba0fc5c57afd105865c899c156c3cb41" title="現局面の合法手の数が0かどうかを判定する。" alt="" coords="720,472,871,513"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a205c2899942284ebafec8ceb0f0bc330" title="スタックの先頭（最も前に保存した要素）" alt="" coords="709,859,881,900"/>
<area shape="rect" href="classkomori_1_1_node.html#a19fbde5adf6e542e61f6c620df5b4d16" title="現在の探索深さ" alt="" coords="706,639,885,666"/>
<area shape="rect" href="classkomori_1_1detail_1_1_mate_len_impl.html#ab53b046400e9408fdc8c744f56e09e27" title="詰み手数を返す" alt="" coords="677,538,913,565"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a0d81252fa8281a46c86b05b609434429" title="千日手の探索結果で初期化する" alt="" coords="715,691,875,732"/>
<area shape="rect" href="classkomori_1_1_node.html#a2c10b9d22f4966f51b47495088f4fd4b" title="現在の攻め方の持ち駒" alt="" coords="712,757,879,783"/>
<area shape="rect" href="classkomori_1_1_node.html#a485678f91b4653d87fcf5ee6071351de" title="このクラスが保持する Position への参照" alt="" coords="985,891,1125,918"/>
<area shape="rect" href="classkomori_1_1_search_result.html#afc8abfab4851e59c5539e13964b6d4c5" title="φ値" alt="" coords="961,254,1149,281"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af8b976b730b126e74a8c062f275444e9" title="dn" alt="" coords="1197,229,1384,255"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a87047b35fcd4a5b7be3b7ee76d8b740c" title="pn" alt="" coords="1199,279,1383,306"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a41ca1e4127441aabb77abd505922cbb5" title="Dn を計算する" alt="" coords="453,123,629,164"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#ae40d95fbb784281a50322f62559cccd6" title="Pn を計算する" alt="" coords="453,188,629,229"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a997a66618f04c5215c77ec7c5d3eaa01" title="Unknown（2回目以降）の探索結果で初期化する" alt="" coords="461,253,621,295"/>
<area shape="rect" href="classkomori_1_1_node.html#aa5937f4e1ea7d06752752e1d7a015592" title="現在の玉方の持ち駒" alt="" coords="707,1026,883,1053"/>
<area shape="rect" href="namespacekomori.html#a910cf44bbf31dae9af184770f7ca5dd4" title="2 つの持ち駒を 1 つにまとめる" alt="" coords="720,975,871,1002"/>
</map>
</div>

</div>
</div>
<a id="ad0dd7ba48200d7c3f7ebcb884817dc1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0dd7ba48200d7c3f7ebcb884817dc1f">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool komori::LocalExpansion::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>合法手がないかどうか </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkomori_1_1_local_expansion.html#a6b86284bac3fcf5b2de745e2b5376da2" title="現局面における探索結果を返す">CurrentResult</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00236">236</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_ad0dd7ba48200d7c3f7ebcb884817dc1f_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_ad0dd7ba48200d7c3f7ebcb884817dc1f_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_ad0dd7ba48200d7c3f7ebcb884817dc1f_cgraph" id="aclasskomori_1_1_local_expansion_ad0dd7ba48200d7c3f7ebcb884817dc1f_cgraph">
<area shape="rect" title="合法手がないかどうか" alt="" coords="5,5,181,47"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a0d9c7779d27ccf538345227559b69fd9" title="スタックが空かどうか" alt="" coords="229,5,401,47"/>
</map>
</div>

</div>
</div>
<a id="abae6a00cc6de29b0c2602205b4e1e814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abae6a00cc6de29b0c2602205b4e1e814">&#9670;&nbsp;</a></span>FrontIsFirstVisit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool komori::LocalExpansion::FrontIsFirstVisit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最善手の子ノードが初探索かどうか </p>
<dl class="section pre"><dt>Precondition</dt><dd>!CurrentResult().IsFinal() </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00255">255</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_abae6a00cc6de29b0c2602205b4e1e814_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_abae6a00cc6de29b0c2602205b4e1e814_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_abae6a00cc6de29b0c2602205b4e1e814_cgraph" id="aclasskomori_1_1_local_expansion_abae6a00cc6de29b0c2602205b4e1e814_cgraph">
<area shape="rect" title="最善手の子ノードが初探索かどうか" alt="" coords="5,39,181,80"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62" title="最善の子の探索結果を取得する" alt="" coords="229,5,405,47"/>
<area shape="rect" href="classkomori_1_1_search_result.html#abfe86f70fc0d0535b1b01057732f6acb" title="Unknown部分の結果。!IsFinal() の場合のみ呼び出し可能。" alt="" coords="237,71,397,112"/>
</map>
</div>

</div>
</div>
<a id="a407d72e5c72f46276e55882d21af13ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a407d72e5c72f46276e55882d21af13ee">&#9670;&nbsp;</a></span>FrontPnDnThresholds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;<a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>, <a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&gt; komori::LocalExpansion::FrontPnDnThresholds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td>
          <td class="paramname"><em>thpn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td>
          <td class="paramname"><em>thdn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最善手の子の探索で用いる pn と dn のしきい値 </p>
<dl class="section pre"><dt>Precondition</dt><dd>!empty() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thpn</td><td>現局面の pn のしきい値 </td></tr>
    <tr><td class="paramname">thdn</td><td>現局面の dn のしきい値 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>子局面の pn, dn のしきい値のペア </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00403">403</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a407d72e5c72f46276e55882d21af13ee_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a407d72e5c72f46276e55882d21af13ee_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a407d72e5c72f46276e55882d21af13ee_cgraph" id="aclasskomori_1_1_local_expansion_a407d72e5c72f46276e55882d21af13ee_cgraph">
<area shape="rect" title="最善手の子の探索で用いる pn と dn のしきい値" alt="" coords="5,90,181,131"/>
<area shape="rect" href="namespacekomori.html#a9b03d373bf7f539b7a9d8d0df9a61669" title="δ値を計算する。現局面が or_node なら dn, そうでないなら pn を返す。" alt="" coords="271,5,381,32"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a43793b72731e05e49095ff2e1183e72a" title="2番目の子の phi 値を計算する" alt="" coords="238,57,414,98"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a3c22346049a444d6065709e5e3140d16" title="現局面の delta しきい値が thdelta のとき、子局面の delta しきい値を計算する" alt="" coords="229,122,423,163"/>
<area shape="rect" href="namespacekomori.html#a44b8d6f27caaa6caaa22610dcc422328" title="φ値を計算する。現局面が or_node なら pn, そうでないなら dn を返す。" alt="" coords="279,188,373,215"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5e99daa3af91a53273900789df53aee8" title="スタックに保存されている要素数" alt="" coords="471,57,643,98"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="481,123,632,149"/>
<area shape="rect" href="namespacekomori.html#a7311d41d5455115265700ac2518036a7" title="T 型の値を足し合わせる。ただし、計算結果が T 型で表現できない場合は上限値で丸める（符号なし型）" alt="" coords="475,173,638,200"/>
<area shape="rect" href="classkomori_1_1_move_picker.html#a94848cbebf11d7f272a8360cdfc5f1ff" title="現局面の合法手の個数を返す。" alt="" coords="481,225,632,266"/>
</map>
</div>

</div>
</div>
<a id="af6420e1215e90c8b46af8c7226a32f62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6420e1215e90c8b46af8c7226a32f62">&#9670;&nbsp;</a></span>FrontResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a>&amp; komori::LocalExpansion::FrontResult </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最善の子の探索結果を取得する </p>
<dl class="section pre"><dt>Precondition</dt><dd>!Current().IsFinal() </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00246">246</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>

</div>
</div>
<a id="a4de8b8d220487e7a8b4b28c00461acf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4de8b8d220487e7a8b4b28c00461acf9">&#9670;&nbsp;</a></span>FrontSumMask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekomori.html#a20dc4ee64c842a7caa36c7cf7496ce61">BitSet64</a> komori::LocalExpansion::FrontSumMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最善手の Sum Mask </p>
<dl class="section pre"><dt>Precondition</dt><dd>!CurrentResult().IsFinal() </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00260">260</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a4de8b8d220487e7a8b4b28c00461acf9_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a4de8b8d220487e7a8b4b28c00461acf9_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a4de8b8d220487e7a8b4b28c00461acf9_cgraph" id="aclasskomori_1_1_local_expansion_a4de8b8d220487e7a8b4b28c00461acf9_cgraph">
<area shape="rect" title="最善手の Sum Mask" alt="" coords="5,5,181,47"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62" title="最善の子の探索結果を取得する" alt="" coords="229,5,405,47"/>
</map>
</div>

</div>
</div>
<a id="acdba010a0f3af21bbd55c7a6ffda1863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdba010a0f3af21bbd55c7a6ffda1863">&#9670;&nbsp;</a></span>MakeComparer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto komori::LocalExpansion::MakeComparer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>idx_</code> の比較器を生成する。 </p>
<dl class="section return"><dt>Returns</dt><dd>関数オブジェクト（比較器） </dd></dl>
<dl class="section note"><dt>Note</dt><dd>ラムダ式を返すために、戻り値を auto にしてクラス先頭で定義している。 </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00110">110</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>

</div>
</div>
<a id="a3c22346049a444d6065709e5e3140d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c22346049a444d6065709e5e3140d16">&#9670;&nbsp;</a></span>NewThdeltaForBestMove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a> komori::LocalExpansion::NewThdeltaForBestMove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekomori.html#ae2b179f7c8adb463807f13c9d73ec34a">PnDn</a>&#160;</td>
          <td class="paramname"><em>thdelta</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>現局面の delta しきい値が <code>thdelta</code> のとき、子局面の delta しきい値を計算する </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thdelta</td><td>現局面の delta しきい値 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00539">539</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a3c22346049a444d6065709e5e3140d16_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a3c22346049a444d6065709e5e3140d16_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a3c22346049a444d6065709e5e3140d16_cgraph" id="aclasskomori_1_1_local_expansion_a3c22346049a444d6065709e5e3140d16_cgraph">
<area shape="rect" title="現局面の delta しきい値が thdelta のとき、子局面の delta しきい値を計算する" alt="" coords="5,78,199,119"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="257,5,408,32"/>
<area shape="rect" href="namespacekomori.html#a7311d41d5455115265700ac2518036a7" title="T 型の値を足し合わせる。ただし、計算結果が T 型で表現できない場合は上限値で丸める（符号なし型）" alt="" coords="251,56,414,83"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5e99daa3af91a53273900789df53aee8" title="スタックに保存されている要素数" alt="" coords="247,107,419,149"/>
<area shape="rect" href="classkomori_1_1_move_picker.html#a94848cbebf11d7f272a8360cdfc5f1ff" title="現局面の合法手の個数を返す。" alt="" coords="257,173,408,214"/>
</map>
</div>

</div>
</div>
<a id="affb7687064b4b4c158725ef551a3dd87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affb7687064b4b4c158725ef551a3dd87">&#9670;&nbsp;</a></span>ResolveDoubleCountIfBranchRoot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool komori::LocalExpansion::ResolveDoubleCountIfBranchRoot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkomori_1_1_branch_root_edge.html">BranchRootEdge</a>&#160;</td>
          <td class="paramname"><em>edge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>二重カウントの起点 <code>edge</code> に一致する枝が子に含まれるなら二重カウントを解消する </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">edge</td><td>二重カウントの起点の枝 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>edge</code> を見つけたら true </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00424">424</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_affb7687064b4b4c158725ef551a3dd87_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_affb7687064b4b4c158725ef551a3dd87_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_affb7687064b4b4c158725ef551a3dd87_cgraph" id="aclasskomori_1_1_local_expansion_affb7687064b4b4c158725ef551a3dd87_cgraph">
<area shape="rect" title="二重カウントの起点 edge に一致する枝が子に含まれるなら二重カウントを解消する" alt="" coords="5,129,256,171"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a205c2899942284ebafec8ceb0f0bc330" title="スタックの先頭（最も前に保存した要素）" alt="" coords="306,5,478,47"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a9510c937ce218cc0334a5434b555d270" title="δ値の一時変数 sum_delta_except_best_, max_delta_except_best_ を計算し直す" alt="" coords="304,71,480,112"/>
<area shape="rect" href="namespacekomori.html#ae2a1de257f1363b6f913c501fa5c43c1" title="Iterable の先頭 kSkip 要素をスキップする" alt="" coords="552,133,655,159"/>
<area shape="rect" href="classkomori_1_1_bit_set.html#a4d85204891b7f94b52e8e538325a9efd" title="i 番目のフラグを false に設定する。" alt="" coords="313,187,471,214"/>
<area shape="rect" href="classkomori_1_1_bit_set.html#a63c3eae9e1719a685e24e8ba98a82804" title="i 番目のフラグ状態を取得する。" alt="" coords="318,238,466,265"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="528,78,679,105"/>
</map>
</div>

</div>
</div>
<a id="a8913e080ee09b726e16a2dd4f23091e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8913e080ee09b726e16a2dd4f23091e9">&#9670;&nbsp;</a></span>RewriteImportantChildren()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void komori::LocalExpansion::RewriteImportantChildren </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>重要そうな子局面を改めて置換表に書き直す </p>
<p>通常では <code><a class="el" href="classkomori_1_1_local_expansion.html#abe2ba3b9ec83384f7048de90760edbae" title="最善手の子の評価値を更新する">UpdateBestChild()</a></code> のタイミングで置換表に結果を書き出すが、 他の子を探索している間に置換表から結果が消えてしまうことが稀に発生する。 この関数では、重要そうな子を改めて置換表に書くことで重複探索を防ぐことを目的にしている。 </p>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00377">377</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a8913e080ee09b726e16a2dd4f23091e9_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a8913e080ee09b726e16a2dd4f23091e9_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a8913e080ee09b726e16a2dd4f23091e9_cgraph" id="aclasskomori_1_1_local_expansion_a8913e080ee09b726e16a2dd4f23091e9_cgraph">
<area shape="rect" title="重要そうな子局面を改めて置換表に書き直す" alt="" coords="5,5,204,47"/>
<area shape="rect" href="classkomori_1_1_delayed_move_list.html#a6bedc952934530f4c8a5f86fb62c3e7e" title="i_raw の直後に展開すべき手のインデックスを返す。" alt="" coords="252,5,440,47"/>
</map>
</div>

</div>
</div>
<a id="a0f681726c1f6ab4aa93aac9593f96c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f681726c1f6ab4aa93aac9593f96c48">&#9670;&nbsp;</a></span>ShouldStopAncestorSearch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool komori::LocalExpansion::ShouldStopAncestorSearch </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>branch_root_is_or_node</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>二重カウント探索をやめるべきかどうか判定する </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">branch_root_is_or_node</td><td>二重カウントの分岐元が OR node かどうか </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00448">448</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_a0f681726c1f6ab4aa93aac9593f96c48_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_a0f681726c1f6ab4aa93aac9593f96c48_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_a0f681726c1f6ab4aa93aac9593f96c48_cgraph" id="aclasskomori_1_1_local_expansion_a0f681726c1f6ab4aa93aac9593f96c48_cgraph">
<area shape="rect" title="二重カウント探索をやめるべきかどうか判定する" alt="" coords="5,64,209,105"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#af6420e1215e90c8b46af8c7226a32f62" title="最善の子の探索結果を取得する" alt="" coords="481,5,657,47"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#ab49df843166b8d1455bd53280eb7f690" title="delta 値を計算する" alt="" coords="257,93,433,135"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="494,71,645,98"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a0d9c7779d27ccf538345227559b69fd9" title="スタックが空かどうか" alt="" coords="483,123,655,164"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5e99daa3af91a53273900789df53aee8" title="スタックに保存されている要素数" alt="" coords="483,188,655,229"/>
<area shape="rect" href="classkomori_1_1_move_picker.html#a94848cbebf11d7f272a8360cdfc5f1ff" title="現局面の合法手の個数を返す。" alt="" coords="494,253,645,295"/>
</map>
</div>

</div>
</div>
<a id="abe2ba3b9ec83384f7048de90760edbae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe2ba3b9ec83384f7048de90760edbae">&#9670;&nbsp;</a></span>UpdateBestChild()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void komori::LocalExpansion::UpdateBestChild </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkomori_1_1_search_result.html">SearchResult</a> &amp;&#160;</td>
          <td class="paramname"><em>search_result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最善手の子の評価値を更新する </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">search_result</td><td>最善手の子の評価値 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>!empty() </dd></dl>

<p class="definition">Definition at line <a class="el" href="local__expansion_8hpp_source.html#l00295">295</a> of file <a class="el" href="local__expansion_8hpp_source.html">local_expansion.hpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classkomori_1_1_local_expansion_abe2ba3b9ec83384f7048de90760edbae_cgraph.png" border="0" usemap="#aclasskomori_1_1_local_expansion_abe2ba3b9ec83384f7048de90760edbae_cgraph" alt=""/></div>
<map name="aclasskomori_1_1_local_expansion_abe2ba3b9ec83384f7048de90760edbae_cgraph" id="aclasskomori_1_1_local_expansion_abe2ba3b9ec83384f7048de90760edbae_cgraph">
<area shape="rect" title="最善手の子の評価値を更新する" alt="" coords="5,339,181,380"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a73ee987a5eafc4bd27c4af3d85278aea" title="δ値" alt="" coords="243,5,403,47"/>
<area shape="rect" href="namespacekomori.html#a9b03d373bf7f539b7a9d8d0df9a61669" title="δ値を計算する。現局面が or_node なら dn, そうでないなら pn を返す。" alt="" coords="268,71,379,98"/>
<area shape="rect" href="classkomori_1_1_search_result.html#ae03260ca26fcff04cc38cd1fc6bd27c0" title="詰み／不詰の結論が出ているか" alt="" coords="243,123,403,164"/>
<area shape="rect" href="classkomori_1_1_delayed_move_list.html#a6bedc952934530f4c8a5f86fb62c3e7e" title="i_raw の直後に展開すべき手のインデックスを返す。" alt="" coords="229,188,417,229"/>
<area shape="rect" href="classkomori_1_1_search_result.html#afc8abfab4851e59c5539e13964b6d4c5" title="φ値" alt="" coords="229,254,417,281"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a122fd54c4b21ad3d1ce129cf1b2d6f3f" title="val をスタックに追加する" alt="" coords="237,305,409,347"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a9510c937ce218cc0334a5434b555d270" title="δ値の一時変数 sum_delta_except_best_, max_delta_except_best_ を計算し直す" alt="" coords="235,371,411,412"/>
<area shape="rect" href="classkomori_1_1_bit_set.html#a4d85204891b7f94b52e8e538325a9efd" title="i 番目のフラグを false に設定する。" alt="" coords="244,437,403,463"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#af775297809f84ea9b90f806b7b757463" title="末尾以外がソートされた状態のとき、末尾要素を適切な位置に挿入する" alt="" coords="235,488,411,529"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#ab4a527e2cbb915cbeadd0002be0ab302" title="[0, excluded_moves_] の末尾以外がソートされた状態のとき、末尾要素を適切な位置に挿入する" alt="" coords="235,619,411,660"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#a99c12378417149d76d98586832018ab1" title="先頭以外がソートされた状態のとき、先頭要素を適切な位置に挿入する" alt="" coords="235,553,411,595"/>
<area shape="rect" href="classkomori_1_1_move_picker.html#a94848cbebf11d7f272a8360cdfc5f1ff" title="現局面の合法手の個数を返す。" alt="" coords="248,684,399,725"/>
<area shape="rect" href="classkomori_1_1_search_result.html#af8b976b730b126e74a8c062f275444e9" title="dn" alt="" coords="474,155,661,182"/>
<area shape="rect" href="classkomori_1_1_search_result.html#a87047b35fcd4a5b7be3b7ee76d8b740c" title="pn" alt="" coords="475,105,659,131"/>
<area shape="rect" href="namespacekomori.html#a177c33b9356030cab989f275b6fd6ea4" title="pn/dn の値を [min, max] の範囲に収まるように丸める。" alt="" coords="492,371,643,398"/>
<area shape="rect" href="namespacekomori.html#ae2a1de257f1363b6f913c501fa5c43c1" title="Iterable の先頭 kSkip 要素をスキップする" alt="" coords="516,321,619,347"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5f9f4c0e10424bb96f652c18cfc6afc7" title="スタックの末尾（最も後に保存した要素）" alt="" coords="481,423,653,464"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5ee11c692c6bfa5698cffdbcfdd02929" title="イテレータの開始位置" alt="" coords="481,605,653,647"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a2c7ae503860768e494c2fc41ddeb9270" title="イテレータの終了位置" alt="" coords="465,554,669,581"/>
<area shape="rect" href="classkomori_1_1_local_expansion.html#acdba010a0f3af21bbd55c7a6ffda1863" title="idx_ の比較器を生成する。" alt="" coords="479,671,655,712"/>
<area shape="rect" href="classkomori_1_1_fixed_size_stack.html#a5e99daa3af91a53273900789df53aee8" title="スタックに保存されている要素数" alt="" coords="481,488,653,529"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
